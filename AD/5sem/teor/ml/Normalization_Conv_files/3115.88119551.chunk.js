(self.webpackChunklite=self.webpackChunklite||[]).push([[3115],{33380:(e,t,n)=>{"use strict";n.d(t,{u6:()=>i,TA:()=>o}),n(63038);var r=n(67294),a={updateWatchedBounds:function(){},watchedBounds:new Map},i=r.createContext(a),o=function(e){var t=e.children,n=e.className,a=e.name,o=e.type,c=e.offset,l=r.useContext(i).updateWatchedBounds,u=r.useRef(null);return r.useEffect((function(){l&&l(a,u,{type:o,offset:c})}),[]),r.createElement("div",{className:n,ref:u},t)}},91553:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var r=n(67294),a=n(43487);function i(e){var t=e.disabled,n=e.message,i=void 0===n?"Changes you made may not be saved.":n,o=(0,a.v9)((function(e){return e.client.hydrated}));r.useEffect((function(){if(!t&&o)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)};function e(e){return e.preventDefault(),e.returnValue=i,i}}),[t,i,o])}},83263:(e,t,n)=>{"use strict";n.d(t,{Q:()=>I,f:()=>N});var r=n(63038),a=n.n(r),i=n(59713),o=n.n(i),c=n(67294),l=n(25735),u=n(4381),s=n(94124),d=n(77355),p=n(31889),f=n(14646),g=n(34135),h=n(97217),m=n(43487),v=n(14804),y=n(46696);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={xs:-40,sm:-40,md:-45,lg:-80},O={xs:-55,sm:-60,md:-65,lg:-130},x={xs:0,sm:350,md:490,lg:680},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=(0,m.v9)((function(e){return e.client.hydrated})),n=b(b({},x),e),r=c.useState("lg"),i=a()(r,2),o=i[0],l=i[1];return c.useEffect((function(){var e=function(){window.innerWidth>=n.lg?l("lg"):window.innerWidth>=n.md?l("md"):window.innerWidth>=n.sm?l("sm"):window.innerWidth>=n.xs&&l("xs")};return t&&(e(),g.V6.on("resize",e)),function(){t&&g.V6.off("resize",e)}}),[t,n.lg,n.md,n.sm,n.xs]),o},P=function(e,t,n){return function(r){var a=n&&("xs"===t||"sm"===t),i=a?3*S[t]:O[t],o=1===e?"".concat(a?2*S[t]:S[t],"px"):2===e?"".concat(i,"px"):void 0;return{position:"relative",borderRight:e<2?"".concat(3,"px solid ").concat(r.baseColor.background.light):void 0,backgroundColor:r.baseColor.background.light,zIndex:3-e,marginLeft:o,paddingLeft:0===e?"0":"4px"}}},w=function(e){var t,n=e.catalogItem,r=e.width,a=e.height,i=e.isMobile,o=null==n?void 0:n.entity,f=!!(0,l.VB)({name:"enable_follow_list",placeholder:!1}),g=(0,p.F)(),h=c.createElement(d.x,{height:"inherit",minHeight:"".concat(a,"px"),width:"".concat(r,"px"),background:f?g.baseColor.background.normal:v.zv},!f&&c.createElement(d.x,{borderRadius:"50%",width:"100%",height:"100%",background:"#757575"}));return o&&"Post"===o.__typename&&null!==(t=o.previewImage)&&void 0!==t&&t.id&&(h=c.createElement(u.UV,{miroId:o.previewImage.id,alt:o.previewImage.alt||"",width:r,height:a,aspectRatio:i?u.Pr.FourToThree:void 0,strategy:y._S.Crop,loading:s.K.LAZY,rules:{height:"100%"}})),c.createElement(d.x,{height:"100%"},h)},N=function(e){var t=e.catalogItems,n=e.isEmbeded,r=void 0!==n&&n,a=e.coverWidth,i=e.coverHeight,o=e.breakpoints,l=(0,f.I)(),u=I(o),s=t.filter((function(e){var t,n=e.entity;return!("Post"!==(null==n?void 0:n.__typename)||null===(t=n.previewImage)||void 0===t||!t.id||n.visibility===h.Wn.UNLISTED)})),p=[s[0],s[1],s[2]],g="sm"===u||"xs"===u,m=function(e,t){return 3*t+S[e]+O[e]+6}(u,a);return c.createElement(d.x,{display:"flex",overflow:"hidden",justifyContent:g?r?"space-between":"flex-start":"flex-end",width:g?"100%":"".concat(m,"px"),height:"100%",borderRadius:g?"0 0 3px 3px":"0 3px 3px 0",position:"relative",flexShrink:"0"},p.map((function(e,t){return c.createElement("div",{key:(null==e?void 0:e.catalogItemId)||t,className:l(P(t,u,r))},c.createElement(w,{isMobile:g,catalogItem:e,height:i,width:a}))})))}},47418:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(319),a=n.n(r),i=n(27048),o=n(68216),c=n(47282),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EmbedCatalog_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}}].concat(a()(i.W.definitions),a()(o.$m.definitions))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EmbedCatalog_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"postItemsCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"catalogUrl_catalog"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EmbedCatalog_user"}}]}},{kind:"Field",alias:{kind:"Name",value:"listItemsConnection"},name:{kind:"Name",value:"itemsConnection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"pagingOptions"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogItemId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PreviewCatalogCovers_catalogItemV2"}}]}}]}}]}}].concat(a()(o.Ui.definitions),a()(l.definitions),a()(c.x.definitions))}},75845:(e,t,n)=>{"use strict";n.d(t,{sI:()=>S,Yj:()=>O,j$:()=>x,F5:()=>I,Xv:()=>P});var r=n(23450),a=n.n(r),i=n(67294),o=n(83263),c=n(17193),l=n(77355),u=n(93310),s=n(47230),d=n(87691),p=n(52069),f=n(18627),g=n(66411),h=n(14646),m=n(18122),v=n(43487),y=n(92305),E=n(50458),b={xs:277,sm:277,md:196,lg:196},S={xs:140,sm:195,md:90,lg:194},O={xs:105,sm:105,md:194,lg:194},x={sm:380},I=function(e,t){return function(n){return{display:"flex",backgroundColor:n.baseColor.background.light,justifyContent:"space-between",flexDirection:e?"column":"row",overflow:"hidden",border:"1px solid",borderColor:n.baseColor.border.lighter,borderRadius:"4px",maxHeight:"".concat(b[t],"px"),maxWidth:"100%",width:e?"100%":void 0,cursor:"pointer"}}},P=function(e){var t=e.catalog,n=(0,h.I)(),r=(0,v.v9)((function(e){return e.config.authDomain})),P=(0,f.Av)(),w=(0,g.pK)(),N=(0,m.g)({onPresentedFn:function(){P.event("list.presented",{listId:t.id,source:w})}}),T=(0,o.Q)(x),k="sm"===T||"xs"===T,R=O[T],M=S[T],C=i.useCallback((function(e){e.stopPropagation()}),[]),_=i.useCallback((function(){window.top?window.top.location.href=(0,E.ykG)(t,r):window.location.href=(0,E.ykG)(t,r)}),[t,r]),D=i.useCallback((function(e){"Enter"===e.key&&_()}),[_]);i.useEffect((function(){window.parent.postMessage(JSON.stringify({src:window.location.toString(),context:"iframe.resize",height:b[T]}),"*")}),[T]);var H=i.useMemo((function(){return[t.postItemsCount>0?"".concat(t.postItemsCount," ").concat(a()("story",t.postItemsCount)):null].filter((function(e){return e})).join(", ")}),[t.postItemsCount]);return i.createElement("div",{role:"button",tabIndex:0,onKeyDown:D,onClick:_,className:n(I(k,T))},i.createElement(l.x,{ref:N,padding:"24px"},i.createElement(l.x,{display:"flex",alignItems:"center"},i.createElement(c.Yt,{user:t.creator,scale:"XXXS",target:"_top"}),i.createElement(l.x,{padding:"0 8px",flexShrink:"0"},i.createElement(d.F,{color:"LIGHTER",scale:"S",clamp:1},i.createElement(u.r,{target:"_top",onClick:C,href:(0,E.AWr)(t.creator,r)},t.creator.name)))),i.createElement(l.x,{marginTop:k?"16px":"24px",marginBottom:k?"16px":"24px",height:k?"20px":"48px"},i.createElement(p.Dx,{scale:k?"XS":"S",clamp:k?1:2},t.predefined?(0,y.S6)(t.predefined):t.name)),i.createElement(l.x,{display:"flex",alignItems:"center"},i.createElement(l.x,{flexShrink:"0"},i.createElement(s.z,{target:"_top",size:"SMALL",buttonStyle:"SUBTLE",href:(0,E.ykG)(t,r)},"View list")),H&&i.createElement(l.x,{paddingLeft:"16px",flexShrink:"0"},i.createElement(d.F,{color:"LIGHTER",scale:"S",tag:"span"},H)))),i.createElement(o.f,{coverHeight:R,coverWidth:M,catalogItems:t.listItemsConnection.items,isEmbeded:!0,breakpoints:x}))}},13756:(e,t,n)=>{"use strict";n.d(t,{s:()=>h,m:()=>g});var r=n(59713),a=n.n(r),i=n(63038),o=n.n(i),c=n(21919),l=n(27517),u=n(18627),s=n(53546),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"QuoteDeleteMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetQuoteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteQuote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetQuoteId"},value:{kind:"Variable",name:{kind:"Name",value:"targetQuoteId"}}}]}]}}]};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.children,n=e.onCompleted,r=e.targetPostId,a=e.targetQuoteId,i=e.quoteType,l=e.viewerId,p=(0,u.Av)(),g=(0,c.D)(d,{variables:{targetPostId:r,targetQuoteId:a},onCompleted:function(e){p.event("quotes.ui.quoteDeleted",{postId:r,quoteId:a,quoteType:s.x$[i]}),null==n||n(e)},update:function(e){r&&e.modify({id:e.identify({__typename:"Post",id:r}),fields:{highlights:function(e,t){var n=t.readField;return e.filter((function(e){return n("id",e)!==a}))}}}),l&&e.modify({id:e.identify({__typename:"User",id:l}),fields:{highlightsStreamConnection:function(e,t){var n=t.readField;return f(f({},e),{},{stream:e.stream.filter((function(e){return"StreamItemQuotePreview"!==e.itemType.__typename||!e.itemType.quote||a!==n("id",e.itemType.quote)}))})}}})}});return t({deleteQuote:o()(g,1)[0]})},h=(0,l.$j)()(g)},6722:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=n(67294).createContext({openSidebarToRespondToHighlight:function(){return null}})},75119:(e,t,n)=>{"use strict";n.d(t,{KN:()=>u,Zx:()=>s});var r=n(63038),a=n.n(r),i=n(67294),o=n(10374),c=n(43487),l=(0,i.createContext)({openPrivateNoteId:null,privateNoteSelection:null,setOpenPrivateNoteId:function(){},setPrivateNoteSelection:function(){}}),u=function(e){var t,n,r=e.children,u=(0,c.v9)((function(e){return e.navigation.currentHash}));if(u){var s=u.split("-");t=s[0],n=s[1]}var d=(0,o.Ij)().paragraphRefsMappers,p=d.paragraphRefsMap,f=d.paragraphRefsByNameMap,g=(0,i.useState)(null),h=a()(g,2),m=h[0],v=h[1],y=(0,i.useState)(null),E=a()(y,2),b=E[0],S=E[1];return(0,i.useEffect)((function(){v(n)}),[n]),(0,i.useEffect)((function(){if(t&&!n){var e=f.get(t);e&&setTimeout((function(){return window.scrollTo(0,e.offsetTop)}))}}),[p]),i.createElement(l.Provider,{value:{openPrivateNoteId:m,privateNoteSelection:b,setOpenPrivateNoteId:v,setPrivateNoteSelection:S}},r)},s=function(){return(0,i.useContext)(l)}},86249:(e,t,n)=>{"use strict";n.d(t,{Tz:()=>Ge,UW:()=>$e,Ms:()=>Ve});var r=n(28655),a=n.n(r),i=n(63038),o=n.n(i),c=n(92471),l=n(67294),u=n(75119),s=n(10374),d=n(13119),p=n(67154),f=n.n(p),g=n(59713),h=n.n(g),m=n(6479),v=n.n(m),y=n(27517),E=n(319),b=n.n(E),S=n(32493),O=n(18627),x=n(53546);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(){var e=a()(["\n  query QuoteCreateMutation_postQuotes($postId: ID!) {\n    post(id: $postId) {\n      id\n      highlights {\n        id\n        ...QuoteCreateMutation_highlight\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function N(){var e=a()(["\n  mutation QuoteCreateMutation(\n    $targetPostId: ID!\n    $targetPostVersionId: ID!\n    $targetParagraphNames: [ID!]!\n    $startOffset: Int!\n    $endOffset: Int!\n    $quoteType: StreamItemQuoteType!\n  ) {\n    createQuote(\n      targetPostId: $targetPostId\n      targetPostVersionId: $targetPostVersionId\n      targetParagraphNames: $targetParagraphNames\n      startOffset: $startOffset\n      endOffset: $endOffset\n      quoteType: $quoteType\n    ) {\n      __typename\n      id\n      ...QuoteCreateMutation_highlight\n    }\n  }\n  ","\n"]);return N=function(){return e},e}function T(){var e=a()(["\n  fragment QuoteCreateMutation_highlight on Quote {\n    id\n    paragraphs {\n      ...QuoteCreateMutation_paragraph\n    }\n    startOffset\n    endOffset\n    userId\n    user {\n      __typename\n      id\n      name\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function k(){var e=a()(["\n  fragment QuoteCreateMutation_paragraph on Paragraph {\n    id\n    name\n    text\n  }\n"]);return k=function(){return e},e}var R=(0,c.Ps)(k()),M=(0,c.Ps)(T(),R),C=(0,c.Ps)(N(),M),_=(0,c.Ps)(w(),M),D=function(e){var t=e.children,n=e.endOffset,r=e.onUpdate,a=e.onCompleted,i=e.quoteType,o=e.startOffset,c=e.targetParagraphs,u=e.targetPostId,s=e.targetPostVersionId,d=e.viewer,p=(0,O.Av)(),f=c.map((function(e){return e.name})).filter((function(e){return!!e}));return l.createElement(S.m,{mutation:C,onCompleted:function(e){e.createQuote&&p.event("quotes.ui.quoteCreated",{postId:u,quoteId:e.createQuote.id,quoteType:x.x$[i]}),a&&a(e)},optimisticResponse:{createQuote:{__typename:"Quote",id:"temp",paragraphs:c.map((function(e){return{id:"tempQuote_".concat(e.id),name:e.name,text:e.text,__typename:"Paragraph"}})),startOffset:o,endOffset:n,userId:d?d.id:"",user:{__typename:"User",id:d?d.id:"",name:d?d.name:""}}},update:function(e,t){var n,a=e.readQuery({query:_,variables:{postId:u}}),i=null===(n=t.data)||void 0===n?void 0:n.createQuote;if(i){var o,c,l=P(P({},a),{},{post:P(P({},null==a?void 0:a.post),{},{highlights:[].concat(b()(null!==(o=null==a||null===(c=a.post)||void 0===c?void 0:c.highlights)&&void 0!==o?o:[]),[i])})});e.writeQuery({query:_,variables:{postId:u},data:l}),null!=d&&d.id&&"temp"!==i.id&&e.modify({id:e.identify({__typename:"User",id:d.id}),fields:{highlightsStreamConnection:function(e,t){return t.DELETE}}})}r&&r(t.data)},variables:{targetPostId:u,targetPostVersionId:s,targetParagraphNames:f,startOffset:o,endOffset:n,quoteType:i}},(function(e){return t({createQuote:e})}))},H=n(13756),L=(0,y.$j)()((function(e){var t=e.children,n=e.endOffset,r=e.onCompleted,a=e.quoteType,i=e.startOffset,o=e.onUpdate,c=e.targetParagraphs,u=e.targetPostId,s=e.targetPostVersionId,d=e.targetQuoteId,p=e.viewer;return l.createElement(D,{endOffset:n,onUpdate:o,onCompleted:r,quoteType:a,startOffset:i,targetParagraphs:c,targetPostId:u,targetPostVersionId:s,viewer:p},(function(e){var n=e.createQuote;return l.createElement(H.m,{targetPostId:u,targetQuoteId:d||"",onCompleted:r,quoteType:a,viewerId:null==p?void 0:p.id},(function(e){var r=e.deleteQuote;return t({createQuote:n,deleteQuote:r})}))}))})),j=n(6722),A=n(25267),F=n(26350),q=n(78817);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var U=l.createElement("path",{d:"M13.7 15.96l5.2-9.38-4.72-2.62-5.2 9.38 4.72 2.62zm-.5.89l-1.3 2.37-1.26.54-.7 1.26-3.8-.86 1.23-2.22-.2-1.35 1.31-2.37 4.73 2.62z",fillRule:"evenodd"});const Q=function(e){return l.createElement("svg",W({width:25,height:25,viewBox:"0 0 25 25"},e),U)};function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var G=l.createElement("g",{fillRule:"evenodd"},l.createElement("path",{d:"M17.66 4.55H7.35A4.36 4.36 0 0 0 3 8.9v5.68a4.35 4.35 0 0 0 3.7 4.28v2.77c0 .3.35.48.59.3l3.9-3h6.48a4.37 4.37 0 0 0 4.35-4.35V8.9a4.35 4.35 0 0 0-4.34-4.35zM16 14.31a.99.99 0 0 1-1 .99h-5a1 1 0 0 1-1-.99v-3.02a.99.99 0 0 1 1-.99v-.78A2.5 2.5 0 0 1 12.5 7 2.5 2.5 0 0 1 15 9.5v.79a1 1 0 0 1 1 .99v3.02z"}),l.createElement("path",{d:"M14 9.81c0-.83-.67-1.68-1.5-1.68S11 8.97 11 9.81v.49h3v-.49z"}));const z=function(e){return l.createElement("svg",B({width:25,height:25,viewBox:"0 0 25 25"},e),G)};function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var $=l.createElement("path",{d:"M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03z",fillRule:"evenodd"});const X=function(e){return l.createElement("svg",V({width:25,height:25,viewBox:"0 0 25 25"},e),$)};var Y=n(27778);function J(e){var t,n=e.action,r=e.actionHandler,a=e.requireLogin,i=void 0===a||a,c=e.susiProps,u=e.viewer,s=l.useState(null),d=o()(s,2),p=d[0],g=d[1];switch(l.useEffect((function(){g(document&&document.documentElement&&"ontouchstart"in document.documentElement)}),[]),n){case"highlight":t=Q;break;case"respond":t=X;break;case"tweet":t=Y.Z;break;case"privateNote":t=z;break;default:t=function(){return null}}var h=p?function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}:void 0,m=!u&&i?function(e){var t=e.children;return l.createElement("div",{onTouchStart:h},!!c&&l.createElement(F.R,f()({susiEntry:"highlight_text"},c),t))}:function(e){var t=e.children;return l.createElement(q.P,{rules:{fill:"inherit"},onClick:function(){return r(n)},onTouchStart:h},t)};return l.createElement(m,null,l.createElement(t,null))}var K=n(77355),Z=n(87691),ee=n(66411),te=n(31889),ne=n(14646),re=n(98096),ae=n(14804),ie=n(3207),oe=function(e,t){return function(n){return{display:"inline-block",fill:e?n.accentColor.fill.light:null,paddingRight:t?"6px":null,":hover":{fill:e?n.accentColor.fill.light:null}}}},ce=function(){return{display:"inline-block",fill:ae.ix,padding:"8px 0",whiteSpace:"nowrap"}},le=function(e){return{background:e.baseColor.overlay.lighter,display:"inline-block",height:"25px",width:"1px",verticalAlign:"top"}};function ue(e){var t=e.id,n=e.allowNotes,r=e.allowMainActions,a=e.highlightSourceProvider,i=e.rightContent,o=e.isYourHighlight,c=e.hasIconAfterHighlightIcon,u=e.mouseEnter,s=e.mouseLeave,d=e.position,p=e.update,f=e.onAction,g=e.allowResponse,h=e.allowTweet,m=e.highlightSusiProps,v=(0,te.F)(),y=(0,ne.I)();l.useEffect((function(){p&&p()}),[u,s,d,p]);var E=l.useCallback((function(e){return l.createElement(J,{action:"highlight",viewer:e,actionHandler:f,susiProps:m})}),[f,m]);return l.createElement(re.f,{theme:(0,ie.$_)(v)},l.createElement(A.I,{nonBlocking:!0},(function(e){return l.createElement("div",{id:t,onMouseEnter:u,onMouseLeave:s},l.createElement("div",{className:y(ce)},r&&l.createElement(l.Fragment,null,l.createElement(K.x,{display:"inline-block",padding:c?"0 12px 0 10px":"0 10px"},l.createElement(l.Fragment,null,l.createElement("div",{className:y(oe(o,c))},a?l.createElement(ee.cW,{source:{name:a}},E(e)):E(e)),g&&l.createElement("div",{className:y((d=h,{display:"inline-block",paddingRight:d?"6px":null}))},l.createElement(J,{action:"respond",viewer:e,actionHandler:f})),h&&l.createElement(J,{action:"tweet",viewer:e,requireLogin:!1,actionHandler:f}))),(!!i||n)&&l.createElement("div",{className:y(le)})),!n&&!!i&&l.createElement(K.x,{display:"inline-block",padding:"0 16px"},l.createElement(Z.F,{color:"DARKER",scale:"S"},i)),n&&l.createElement(K.x,{display:"inline-block",padding:"0 16px"},l.createElement(J,{action:"privateNote",viewer:e,actionHandler:f}))));var d})))}var se=l.memo(ue),de=n(73917),pe=n(77241);function fe(e){var t=e.visible,n=void 0===t||t,r=e.position,a=void 0===r?{left:0,top:0,bottom:0}:r,i=v()(e,["visible","position"]),o=a.left,c=a.top,u=a.bottom,s=l.useCallback((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]),d=l.useCallback((function(e){e.preventDefault()}),[]);return l.createElement("span",{onMouseDown:d,onMouseUp:s,onClick:s,style:{display:"block",position:"absolute",left:o,top:c,height:"".concat(u-c,"px"),width:"0px"}},n&&l.createElement(de.J,{darkTheme:!0,disablePortalOverlay:!0,display:"block",isVisible:!0,placement:"top",customZIndex:pe.ZP.selectionMenu,popoverRenderFn:function(e){return l.createElement(se,f()({position:a,update:e},i))},referenceHeight:"100%",refTag:"span",shouldAnimateOpen:!0},l.createElement(l.Fragment,null)))}var ge=n(97217),he=n(43487),me=n(60448),ve=n(78870),ye=n(50458);function Ee(){var e=a()(["\n  fragment SelectionMenu_post on Post {\n    id\n    isPublished\n    isLocked\n    latestPublishedVersion\n    visibility\n    creator {\n      id\n      allowNotes\n    }\n  }\n"]);return Ee=function(){return e},e}function be(){var e=a()(["\n  fragment SelectionMenu_highlight on Quote {\n    id\n    userId\n    user {\n      name\n    }\n  }\n"]);return be=function(){return e},e}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e){var t=e.highlightId,n=e.children,r=v()(e,["highlightId","children"]),a=l.useContext(j.Q).openSidebarToRespondToHighlight,i=l.useContext(Ge),o=i.activeSelection,c=i.setActiveSelection;return l.createElement(L,f()({},r,{quoteType:ge.a6.HIGHLIGHT,targetQuoteId:t}),(function(e){var i=e.createQuote,u=e.deleteQuote;return l.createElement(L,f()({},r,{quoteType:ge.a6.RESPONSE,onCompleted:function(e){e&&e.createQuote&&e.createQuote.id&&a(e.createQuote)}}),(function(e){var a=e.createQuote;return l.createElement(L,f()({},r,{quoteType:ge.a6.HIGHLIGHT,targetQuoteId:t,onUpdate:function(e){return o&&c(Oe(Oe({},o),{},{highlightId:e.createQuote.id}))}}),(function(e){var t=e.createQuote;return n({createHighlightQuote:i,createResponseQuote:a,createTweetQuote:t,deleteHighlightQuote:u})}))}))}))}function Ie(e){var t=e.createPrivateNote,n=e.interactivePost,r=e.isPersistent,a=e.mouseEnter,i=e.mouseLeave,o=e.position,c=void 0===o?{left:0,top:0,bottom:0}:o,u=e.highlightId,s=e.highlights,d=e.selectedParagraphs,p=e.startOffset,g=e.endOffset,h=l.useContext(Ge),m=h.activeSelection,v=h.setActiveSelection,y=(0,O.Av)(),E=(0,he.v9)((function(e){return e.config.authDomain})),b=!!n&&!!n.isPublished,S=!!(n&&n.creator&&n.creator.allowNotes),x=s&&s.find((function(e){return e.id===u})),I=n.id,P=n.latestPublishedVersion,w=!(0,me.T)(),N=d.map((function(e){return e.name})),T=b&&("PUBLIC"===n.visibility||!!n.isLocked),k=w||T,R=l.useCallback((function(e){var t=e.isYourHighlight,n=e.createQuote,r=e.viewer,a=m&&m.selectedParagraph&&m.selectedParagraph.text,i=m&&m.startOffset,o=m&&m.endOffset,c="";a&&"number"==typeof i&&"number"==typeof o&&(c=encodeURIComponent(a.slice(i,o))),r&&r.id&&!t&&n(),window.open("".concat((0,ye.A2M)(E,I),"?type=highlight&text=").concat(c),"_blank"),y.event("post.shareOpen",{postId:I,source:"highlight_menu",dest:"twitter",dialogType:"native"})}),[m,p,g,I]),M=l.useCallback((function(e,n){return function(r){"highlight"===r?(v(null),n?e.deleteHighlightQuote():e.createHighlightQuote()):"respond"===r?e.createResponseQuote():"tweet"===r?e.createTweetQuote():"privateNote"===r&&t()}}),[v,t]);return l.createElement(A.I,{nonBlocking:!0},(function(e){var t,n=!(!x||!e)&&e.id===x.userId;if(n)t="You highlighted";else if(x&&"anon"===x.userId)t="Top highlight";else{var o,s;t=null!==(o=null==x||null===(s=x.user)||void 0===s?void 0:s.name)&&void 0!==o?o:""}var h={targetPostId:I,targetPostVersionId:P,targetParagraphs:d,startOffset:p,endOffset:g,viewer:e};return l.createElement(xe,f()({highlightId:u},h),(function(o){return l.createElement(fe,{position:c,allowMainActions:b,visible:S||b,allowNotes:r&&S,allowResponse:w,allowTweet:T,rightContent:r?void 0:t,isYourHighlight:n,hasIconAfterHighlightIcon:k,hasPaddingAfterResponse:T,highlightSourceProvider:x?"quote_click_menu":"selection_menu",highlightSusiProps:{actionUrl:(0,ve.Rk)((0,ye.QWD)(E,I),{endOffset:g.toString(),paragraphName:N.toString(),startOffset:p.toString(),versionId:P}),operation:"register"},mouseEnter:a,mouseLeave:i,onAction:M(Oe(Oe({},o),{},{createTweetQuote:function(){return R({isYourHighlight:n,viewer:e,createQuote:o.createTweetQuote})}}),n)})}))}))}var Pe=(0,c.Ps)(be()),we=(0,c.Ps)(Ee()),Ne=n(92947),Te=n(69217);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(){var e=a()(["\n  mutation NoteCreateMutation(\n    $targetPostId: ID!\n    $targetPostVersion: ID!\n    $targetParagraphName: ID!\n    $noteContent: String!\n    $selectionStartOffset: Int!\n    $selectionEndOffset: Int!\n  ) {\n    createNote(\n      targetPostId: $targetPostId\n      targetPostVersion: $targetPostVersion\n      targetParagraphName: $targetParagraphName\n      noteContent: $noteContent\n      selectionStartOffset: $selectionStartOffset\n      selectionEndOffset: $selectionEndOffset\n    ) {\n      id\n      ...NoteCreateMutation_privateNote\n    }\n  }\n  ","\n"]);return Me=function(){return e},e}function Ce(){var e=a()(["\n  query NoteCreateMutation_postNotes($postId: ID!) {\n    post(id: $postId) {\n      id\n      privateNotes {\n        id\n        ...NoteCreateMutation_privateNote\n      }\n    }\n  }\n  ","\n"]);return Ce=function(){return e},e}function _e(){var e=a()(["\n  fragment NoteCreateMutation_privateNote on Note {\n    id\n    anchor\n    author {\n      id\n    }\n    content\n    createdAt\n    replies {\n      id\n    }\n    post {\n      id\n    }\n    postId\n    selectionStartOffset\n    selectionEndOffset\n  }\n"]);return _e=function(){return e},e}var De=(0,c.Ps)(_e()),He=(0,c.Ps)(Ce(),De),Le=(0,c.Ps)(Me(),De),je=function(e){var t=e.children,n=e.onCompleted,r=e.targetPostId,a=e.targetPostVersion,i=e.targetParagraphName,o=e.selectionStartOffset,c=e.selectionEndOffset,s=(0,u.Zx)().setOpenPrivateNoteId;return l.createElement(A.I,null,(function(e){return l.createElement(S.m,{mutation:Le,onCompleted:n,update:function(e,t){var n=e.readQuery({query:He,variables:{postId:r}}),a=Re(Re({},t.data.createNote),{},{selectionStartOffset:o,selectionEndOffset:c,post:{id:r,__typename:"Post"}}),i={post:Re(Re({},n.post),{},{privateNotes:[].concat(b()(n.post.privateNotes),[a])})};e.writeQuery({query:He,variables:{postId:r},data:i})}},(function(n){return t({onCreateMutate:function(t){var l=n({variables:{targetPostId:r,targetPostVersion:a,targetParagraphName:i,selectionStartOffset:o,selectionEndOffset:c,noteContent:t},optimisticResponse:{__typename:"Mutation",createNote:{__typename:"Note",id:"temp",anchor:i,author:e,content:t,createdAt:new Date,replies:[],postId:r,selectionStartOffset:o,selectionEndOffset:c,post:{id:r,__typename:"Post"}}}});return s("temp"),l}})}))}))},Ae=n(82865);function Fe(){var e=a()(["\n  fragment PostNewNoteCard_post on Post {\n    id\n    latestPublishedVersion\n  }\n"]);return Fe=function(){return e},e}var qe=function(e){var t=e.activeSelection,n=t.selectedParagraph.name,r=t.startOffset,a=t.endOffset,i=e.onCancel,o=e.onMutationComplete,c=e.onNoteCreation,u=e.post;return n?l.createElement(K.x,{padding:"12px 20px"},l.createElement(je,{targetPostId:u.id,targetPostVersion:u.latestPublishedVersion,targetParagraphName:n,selectionStartOffset:r,selectionEndOffset:a,onCompleted:o},(function(e){var t=e.onCreateMutate;return l.createElement(Ae.X,{onSubmit:function(e){t(e),c()},onCancel:i})}))):null},We=(0,c.Ps)(Fe()),Ue=n(66227);function Qe(){var e=a()(["\n  fragment ActiveSelectionContext_post on Post {\n    id\n    ...SelectionMenu_post\n    ...PostNewNoteCard_post\n  }\n  ","\n  ","\n"]);return Qe=function(){return e},e}function Be(){var e=a()(["\n  fragment ActiveSelectionContext_highlight on Quote {\n    id\n    ...SelectionMenu_highlight\n  }\n  ","\n"]);return Be=function(){return e},e}var Ge=l.createContext({activeSelection:null,setActiveSelection:function(){}}),ze=function(e,t,n){for(var r,a=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT),i=0;r=a.nextNode();)if("NOSCRIPT"!==r.nodeName){if(e===r)return i+t;r.nodeType===Node.TEXT_NODE?i+=r.nodeValue.length:"BR"===r.nodeName&&(i+=1)}else a.nextNode();return-1},Ve=function(e){var t,n=e.children,r=e.highlights,a=e.interactivePost,i=e.disableSelection,c=void 0!==i&&i,p=l.useState(null),f=o()(p,2),g=f[0],h=f[1],m=(0,u.Zx)(),v=m.setOpenPrivateNoteId,y=m.setPrivateNoteSelection,E=function(e){var t=e.createNote,n=null==t?void 0:t.id;n&&v(n)},b=(0,s.Ij)().paragraphRefsMappers,S=b.paragraphRefsMap,O=b.paragraphRefsByNameMap,x=l.useCallback((function(){h(null),document.removeEventListener("click",x)}),[h]),I=l.useCallback((function(e,n){var r=function(e,t){return{startOffset:ze(e.startContainer,e.startOffset,t),endOffset:ze(e.endContainer,e.endOffset,t)}}(e,n),a=r.startOffset,i=r.endOffset;if(-1!==a&&-1!==i&&i-a!=0&&(!g||g.startOffset!==a||g.endOffset!==i)){var o=S.get(n);if(o){var c=e.getBoundingClientRect(),l=c.left,u=c.top,s=c.right,d=c.bottom,p={isFocused:!0,selectedParagraph:o,startOffset:a,endOffset:i,menuPosition:{left:(l+s)/2+window.pageXOffset,top:u+window.pageYOffset,bottom:d+window.pageYOffset}};setTimeout((function(){h(p)})),document.removeEventListener("click",x),t=setTimeout((function(){return document.addEventListener("click",x)}),20)}}}),[S,g,h]);return l.useEffect((function(){return function(){t&&clearTimeout(t),document.removeEventListener("click",x)}}),[S,h]),(0,d.f)(I,c),l.createElement(Ge.Provider,{value:{activeSelection:g,setActiveSelection:h}},l.createElement(Ue.B,null,(function(e){var t=e.isVisible,n=e.hide,i=e.show,o=function(){h(null),y(null),n()},c=g&&g.selectedParagraph&&g.selectedParagraph.name,u=O.get(c||"");return l.createElement(Te.G,{isVisible:t,hide:o,reference:u,popoverRenderFn:function(){return l.createElement(Ne.Y,null,a&&g?l.createElement(qe,{activeSelection:g,onCancel:o,onMutationComplete:E,onNoteCreation:o,post:a}):l.createElement(l.Fragment,null))}},a&&!t&&g&&g.menuPosition?l.createElement(Ie,{createPrivateNote:function(){y({id:"private-note-selection",paragraphs:[g.selectedParagraph],userId:null,startOffset:g.startOffset,endOffset:g.endOffset,user:void 0}),i()},endOffset:g.endOffset,highlightId:g.highlightId,highlights:r,interactivePost:a,isPersistent:g.isFocused,mouseEnter:g.menuMouseEnter,mouseLeave:g.menuMouseLeave,position:g.menuPosition,selectedParagraphs:[g.selectedParagraph],startOffset:g.startOffset}):l.createElement(l.Fragment,null))})),n)},$e=(0,c.Ps)(Be(),Pe);(0,c.Ps)(Qe(),we,We)},10374:(e,t,n)=>{"use strict";n.d(t,{yb:()=>f,Ij:()=>g,CF:()=>h,pK:()=>m});var r=n(28655),a=n.n(r),i=n(63038),o=n.n(i),c=n(92471),l=n(67294),u=n(13119);function s(){var e=a()(["\n  fragment ParagraphRefsMapContext_paragraph on Paragraph {\n    id\n    name\n    text\n  }\n"]);return s=function(){return e},e}var d=l.createContext({paragraphRefsMappers:{paragraphRefsMap:new Map,paragraphTitlesRefsByStyleMap:new Map,paragraphRefsByNameMap:new Map},addParagraphRef:function(){}}),p=function(){return{paragraphRefsMap:new Map,paragraphTitlesRefsByStyleMap:new Map,paragraphRefsByNameMap:new Map}},f=function(e){var t=e.children,n=l.useState(p),r=o()(n,2),a=r[0],i=r[1],c=l.useCallback((function(e,t,n){i((function(r){if(!e.current)return r;var a=r.paragraphRefsMap,i=r.paragraphTitlesRefsByStyleMap,o=r.paragraphRefsByNameMap,c=["Title","Subtitle"].includes(n),l=new Map(i);n&&c&&l.set(n,e.current);var u=new Map(a);c||u.set(e.current,t);var s=new Map(o);return t.name&&!c&&s.set(t.name,e.current),{paragraphRefsMap:u,paragraphTitlesRefsByStyleMap:l,paragraphRefsByNameMap:s}}))}),[i]);return l.createElement(d.Provider,{value:{paragraphRefsMappers:a,addParagraphRef:c}},t)},g=function(){return l.useContext(d)},h=function(e,t){var n=l.useContext(d).addParagraphRef,r=l.useRef(null);return l.useEffect((function(){r.current&&(r.current.setAttribute(u.O,""),n(r,e,t))}),[r]),r},m=(0,c.Ps)(s())},13119:(e,t,n)=>{"use strict";n.d(t,{O:()=>a,f:()=>o});var r=n(67294),a="data-selectable-paragraph",i=function(e){if(!e.commonAncestorContainer)return null;var t=e.commonAncestorContainer instanceof Element?e.commonAncestorContainer:e.commonAncestorContainer.parentElement;return t?t.closest("[".concat(a,"]")):null},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.useEffect((function(){var n=function(){if(!t){var n=document.getSelection();if(n&&"Range"===n.type&&!(n.rangeCount>1)){var r=n.getRangeAt(0);if(r){var a=i(r);a&&e(r,a)}}}};return document.addEventListener("mouseup",n),function(){return document.removeEventListener("mouseup",n)}}),[e])}},23115:(e,t,n)=>{"use strict";n.d(t,{ZQ:()=>je,lD:()=>Ae,l:()=>qe});var r=n(63038),a=n.n(r),i=n(59713),o=n.n(i),c=n(67154),l=n.n(c),u=n(67294),s=n(33380),d=n(46484),p=n(34575),f=n.n(p),g=n(93913),h=n.n(g),m=n(2205),v=n.n(m),y=n(78585),E=n.n(y),b=n(29754),S=n.n(b),O=n(27517),x=n(38381),I=n(60748),P=n(12643),w=n(319),N=n.n(w),T=n(14199),k=n(29746),R=n(14646),M=n(97489),C=function(e){return function(t){return o()({marginTop:"10px",textAlign:e,maxWidth:"".concat((0,k.G)(t,8,!0),"px"),marginLeft:"left"===e?"0":"auto",marginRight:"auto"},M.lg(t),{marginLeft:"auto",textAlign:"center"})}},_=function(e){return function(){var t=e&&100*e;return{width:"".concat(t,"%"),position:"relative",left:"calc(".concat(100-t/2,"% - 8px)"),transform:"translateX(-50%)"}}},D=u.forwardRef((function(e,t){var n=e.children,r=e.richTextStyle,a=e.textAlign,i=void 0===a?"center":a,o=e.extendLeftRatio,c=(0,R.I)(),l=(0,T.n)({name:"detail",scale:"CARD"===r||"SHORTFORM_CARD"===r?"S":"M",color:"LIGHTER"});return u.createElement("figcaption",{className:c([C(i),l].concat(N()(o?[_(o)]:[]))),ref:t},n)}));function H(e){var t=e.children,n=e.figCaption,r=e.className,a=e.figureRef;return u.createElement("figure",{className:r,ref:a},t,n)}var L=n(34135),j=n(96451),A=function(e){var t=e.rootMargin,n=e.children,r=e.target,i=u.useState(!1),o=a()(i,2),c=o[0],l=o[1],s=u.useCallback((function(e){!c&&e.isIntersecting&&l(!0)}),[c]);return(0,j.S)({onIntersect:s,target:r,disconnect:function(){return c},rootMargin:t},[c]),"function"==typeof n?u.createElement(u.Fragment,null,n(c)):c?u.createElement(u.Fragment,null,n):null},F=function(){return{width:"1px",minWidth:"100%","*width":"100%"}};function q(e){var t,n=e.src,r=e.title,i=e.height,o=e.width,c=e.allowFullScreen,s=e.frameBorder,d=e.rules,p=e.placeholderRef,f=e.iframeRef,g=(0,R.I)(),h={src:n,allowFullScreen:c,frameBorder:s,height:i,width:o},m=u.useState(!1),v=a()(m,2),y=v[0],E=v[1],b=u.useState(!1),S=a()(b,2),O=S[0],x=S[1];return O||L.V6.on("load",(function(){return x(!0)})),null!=f&&null!==(t=f.current)&&void 0!==t&&t.parentElement&&f.current.parentElement.offsetWidth<f.current.offsetWidth&&!y&&E(!0),O?u.createElement(A,{rootMargin:"200px 0px",target:p},(function(e){return e?u.createElement("iframe",l()({},h,{ref:f,title:r,className:g(y?[d,F]:d),scrolling:y?"no":"auto"})):null})):null}var W=n(43210),U=n(52499),Q=n(50458),B=function(e){var t=e.host,n=e.paragraph,r=e.paragraphStyle,i=e.richTextStyle,c=e.spaceTop,l=e.updateWatchedBounds,s=(0,R.I)(),d=u.useRef(null),p=(n.iframe||{}).mediaResource,f=p||{},g=f.id,h=f.iframeSrc,m=f.iframeHeight,v=f.iframeWidth,y=f.title,E=h;E||(E=g?(0,Q.jU$)(t,g):"");var b=function(e){var t=e.src,n=e.initialHeight,r=e.initialWidth,i=u.useRef(null),o=u.useState(n),c=a()(o,2),l=c[0],s=c[1],d=u.useState(r),p=a()(d,2),f=p[0],g=p[1];return u.useEffect((function(){if(""!==t){var e=(0,I.x)((function(e,n){i.current&&"MEASURE"===e.type&&e.details.height>0&&(g(i.current.offsetWidth),i.current.contentWindow===n&&s(e.details.height)),"iframe.resize"===e.context&&e.src===t&&e.height>0&&(i.current&&g(i.current.offsetWidth),s(e.height))})).destructor;return function(){e()}}}),[t,n]),[l,f,i]}({src:E,initialHeight:m||0,initialWidth:v||0}),S=a()(b,3),O=S[0],w=S[1],N=S[2],T=u.useRef(null);if(u.useEffect((function(){if(l&&p&&p.id&&w&&O){var e="";d.current&&(e=d.current.offsetTop.toString()),l("".concat(p.id,"-").concat(e),d,{type:"image"})}}),[]),!E)return null;var k=n.text?u.createElement(D,{richTextStyle:i},u.createElement(x.T2,{paragraph:n,paragraphStyle:r,richTextStyle:i})):null,C=[(0,U.qB)(c)];return C.push((function(){return{clear:"both"}})),"OUTSET_LEFT"===(n.layout||void 0)&&"STREAM"!==i&&"INLINE"!==i&&C.push((function(e){var t;return t={background:e.backgroundColor,borderWidth:e.borderWidthThick+"px",borderStyle:e.borderStyle,borderColor:e.backgroundColor,float:"left",marginLeft:"-150px",marginRight:"30px",width:"75%",padding:"0",paddingBottom:"10px"},o()(t,M.md(e),{float:"none",marginLeft:"0",marginRight:"0",width:"100%"}),o()(t,"marginBottom","16px"),t})),u.createElement(H,{className:s(C),figCaption:k,figureRef:d},u.createElement(P.G,{height:O,width:w,backgroundColor:"NONE",ref:T},u.createElement(q,{placeholderRef:T,iframeRef:N,src:E,title:y||"",height:O,width:w,allowFullScreen:!0,frameBorder:"0",rules:W.m})))},G=u.memo(B),z=(0,O.$j)((function(e){return{host:e.navigation.host}}))(G),V=n(59854),$=n.n(V),X=n(10374),Y=n(44651),J=n(18155),K=n(46696),Z=function(e){var t=a()(e,1)[0];return"number"==typeof t?"".concat(t,"px"):t},ee=function(e){var t=a()(e,1)[0];return"".concat(t[0],"% ").concat(t[1],"%")},te=function(e){return a()(e,1)[0]};function ne(e){var t=e.backgroundImage,n=e.boxShadowRules,r=e.miroId,a=e.height,i=e.width,o=e.minHeight,c=e.minWidth,l=e.imgHeight,s=e.imgWidth,d=e.focusPercent,p=e.strategy,f=void 0===p?K._S.Resample:p,g=e.freezeGifs,h=(0,R.I)(),m=t;if(!m){var v=(0,K.W6)({miroId:r,height:l,width:s,strategy:f,freezeGifs:g});m="url(".concat(v,")")}var y=(0,J.mu)(Z,a),E=(0,J.mu)(Z,i),b=o&&(0,J.mu)(Z,o),S=c&&(0,J.mu)(Z,c),O=(0,J.mu)(ee,d),x={backgroundImage:(0,J.mu)(te,m),display:"block",backgroundOrigin:"border-box",backgroundSize:"cover",height:y,width:E,minHeight:b,minWidth:S,backgroundPosition:O,maxWidth:"100%"};return u.createElement("div",{className:h([x,n])})}ne.defaultProps={focusPercent:[50,50]};var re=n(16793),ae=function(e){return{backgroundColor:e.brandColor.sage.light}},ie=function(e,t){var n=(0,K.W6)({freezeGifs:!1,miroId:e,strategy:K._S.Resample,width:t.breakpoints.sm}),r=(0,K.W6)({freezeGifs:!1,miroId:e,strategy:K._S.Resample,width:t.breakpoints.md}),a=(0,K.W6)({freezeGifs:!1,miroId:e,strategy:K._S.Resample,width:t.breakpoints.lg}),i=(0,K.W6)({freezeGifs:!1,miroId:e,strategy:K._S.Resample,width:t.breakpoints.xl});return{xl:"url('".concat(i,"')"),lg:"url('".concat(i,"')"),md:"url('".concat(a,"')"),sm:"url('".concat(r,"')"),xs:"url('".concat(n,"')")}};function oe(e){var t=e.metadata,n=(0,R.I)();return u.createElement(re.Z,null,(function(e){return u.createElement("div",{className:n(ae)},u.createElement(ne,{backgroundImage:ie(t.id,e),miroId:t.id,height:"60vh",width:"100%",minHeight:{xl:500,lg:400,md:400,sm:300,xs:300},imgHeight:500,imgWidth:2e3,focusPercent:null===t.focusPercentX||void 0===t.focusPercentX||null===t.focusPercentY||void 0===t.focusPercentY?void 0:[t.focusPercentX,t.focusPercentY]}))}))}var ce=n(54188),le=n(94124),ue=n(30555),se=n(77355),de=n(12532),pe=function(e){var t=e.highlights,n=e.isSequenceCover,r=void 0!==n&&n,a=e.marginTopOverride,i=e.paragraph,c=e.paragraphStyle,s=e.privateNotes,d=e.richTextStyle,p=e.sequenceAspectRatio,f=e.spaceTop,g=e.updateWatchedBounds,h=e.loading,m=void 0===h?le.K.LAZY:h,v=(0,R.I)(),y=u.useRef(null),E=(0,X.CF)(i,c);return u.useEffect((function(){if(g){var e=i.name,t=i.metadata&&i.metadata.id;if(e&&t){var n="";y.current&&(n=y.current.offsetTop.toString()),g("".concat(e,"-").concat(t,"-").concat(n),y,{type:"image"})}}}),[]),u.useMemo((function(){var e=i.metadata,n=i.layout;if(!e)return null;var g,h=e.id,b=e.originalHeight,S=e.originalWidth,O=e.alt,I=(0,K.JI)(h),P="CARD"===d||"SHORTFORM_CARD"===d||"INLINE"===d,w=(0,de.jg)({layout:n,originalWidth:S||0,originalHeight:b||0,sequenceAspectRatio:p,richTextStyle:d}),N=w.width,T=w.height,k=w.strategy;if("OUTSET_ROW_CONTINUE"===n&&S&&b&&p){var R=S/b;g=$()(p/R,2)}var C,_=i.text?u.createElement(D,{ref:E,richTextStyle:d,textAlign:r?"left":"center",extendLeftRatio:g},s&&u.createElement(Y.A7,{paragraph:i,privateNotes:s}),u.createElement(x.T2,{highlights:t,paragraph:i,paragraphStyle:c,richTextStyle:d})):null;if(r)C=u.createElement(oe,{metadata:{id:h,focusPercentX:e.focusPercentX,focusPercentY:e.focusPercentY}});else{var L={alt:O||"",miroId:h,height:T,width:N,rules:[{width:"100%",maxWidth:"100%",height:"auto"}],maxWidth:T?void 0:"100%",strategy:k,freezeGifs:"STREAM"===d||"RESAMPLE"!==k,focusPercentX:e.focusPercentX,focusPercentY:e.focusPercentY,expectedWidth:N,loading:m,webp:!0};if("OUTSET_LEFT"===n||"INSET_LEFT"===n||"INSET_CENTER"===n&&S||"OUTSET_CENTER"===n&&S){var j=S&&(I?S/2:S);C=u.createElement(ue.X1,{isLinked:!!i.href,width:L.width,height:L.height,originalHeight:e.originalHeight,originalWidth:e.originalWidth,paragraphRef:y},u.createElement("div",{className:v((function(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"OUTSET_CENTER"===n&&j&&j<e.maxWidths.outset?"".concat(e.maxWidths.outset,"px"):"".concat(j,"px")}}))},u.createElement(ce.G,l()({},L,{height:L.height||e.originalHeight||void 0,width:L.width||e.originalWidth||void 0}))))}else C=S&&"INSET_CENTER"!==n?u.createElement(ue.X1,{isLinked:!!i.href,width:L.width,height:L.height,originalHeight:e.originalHeight,originalWidth:e.originalWidth,paragraphRef:y},u.createElement(ce.G,l()({},L,{height:e.originalHeight||L.height,width:e.originalWidth||L.width}))):u.createElement(se.x,{display:"flex",justifyContent:"center",alignItems:"flex-start",sm:{display:"block"}},u.createElement(ue.X1,{isLinked:!!i.href,width:L.width,height:L.height,originalHeight:e.originalHeight,originalWidth:e.originalWidth,paragraphRef:y},u.createElement(ce.G,l()({},L,{width:void 0,maxWidth:"100%",strategy:K._S.Proxy}))));i.href&&(C=u.createElement("a",{href:i.href},C))}var A="SHORTFORM_CARD"===d?[]:[a?(0,U.qB)(a):(0,U.qB)(f)];if(A.push({clear:"both"}),r)A.push((function(e){return o()({},M.lg(e),{paddingLeft:"0px",paddingRight:"0px"})}));else if(("OUTSET_ROW"===n||"OUTSET_ROW_CONTINUE"===n)&&S&&b&&p){var F=S/b,q=$()(F/p*100,2);A.push({width:"".concat(q,"%"),marginRight:"10px",paddingTop:"5px",paddingBottom:"5px",":last-of-type":{marginRight:0}})}else"OUTSET_CENTER"===n?A.push({paddingBottom:"5px",paddingTop:"5px"}):"OUTSET_LEFT"===n&&P?A.push({marginLeft:"auto",marginRight:"auto"}):"OUTSET_LEFT"!==n||P?"INSET_LEFT"===n?A.push({float:"left",width:"50%",paddingBottom:"10px",paddingRight:"30px",marginBottom:"16px"}):"FULL_WIDTH"===n?A.push({width:"100%"}):"INSET_CENTER"===n&&A.push({marginLeft:"auto",marginRight:"auto"}):A.push((function(e){var t;return t={background:e.backgroundColor,borderWidth:e.borderWidthThick+"px",borderStyle:e.borderStyle,borderColor:e.backgroundColor,float:"left",marginLeft:"-150px",marginRight:"30px",width:"75%",padding:"0",paddingBottom:"10px"},o()(t,M.lg(e),{float:"none",marginLeft:"0",marginRight:"0",width:"100%"}),o()(t,"marginBottom","16px"),t}));return u.createElement(H,{className:"".concat(v(A)," paragraph-image"),figCaption:_,figureRef:y},C)}),[JSON.stringify(i),JSON.stringify(s)])},fe=u.memo(pe),ge=n(64718),he=n(78882),me=n(75845),ve=n(83263),ye=function(){var e=(0,R.I)(),t=(0,ve.Q)(me.j$),n="sm"===t||"xs"===t,r=me.Yj[t],a=me.sI[t];return u.createElement("div",{className:e((0,me.F5)(n,t))},u.createElement(se.x,{padding:"24px"},u.createElement(se.x,{display:"flex",alignItems:"center"},u.createElement(se.x,{height:"20px",width:"20px",borderRadius:"50%",backgroundColor:"BASE_NORMAL"}),u.createElement(se.x,{padding:"0 8px",flexShrink:"0"},u.createElement(se.x,{height:"4px",width:"50px",backgroundColor:"BASE_NORMAL"}))),u.createElement(se.x,{marginTop:n?"16px":"24px",marginBottom:n?"16px":"24px",height:n?"20px":"48px"},u.createElement(se.x,{height:"20px",width:"120px",backgroundColor:"BASE_NORMAL"})),u.createElement(se.x,{display:"flex",alignItems:"center"},u.createElement(se.x,{flexShrink:"0"},u.createElement(se.x,{height:"40px",width:"100px",borderRadius:"20px",backgroundColor:"BASE_NORMAL"})))),u.createElement(ve.f,{coverHeight:r,coverWidth:a,catalogItems:[],isEmbeded:!0,breakpoints:me.j$}))},Ee=function(e){var t=e.catalog;return e.loading?u.createElement(ye,null):t?u.createElement(me.Xv,{catalog:t}):null},be=n(27323),Se=n(52069),Oe=n(90586),xe=n(87691),Ie=function(e){return{boxShadow:"inset 0 0 0 1px ".concat(e.baseColor.border.lighter)}},Pe=function(e){var t=e.paragraph,n=e.processedStructuredMarkup,r=t.mixtapeMetadata;if(!r||!r.href)return null;var a=r.href,i=n.title,o=n.description,c=n.domain;return u.createElement(be.P,{href:a||"",disableSourceParam:!0,target:"_blank"},u.createElement(se.x,{display:"flex",flexShrink:"0",padding:"0px"},u.createElement(se.x,{padding:"16px 20px",flexShrink:"1",flexGrow:"1",display:"flex",justifyContent:"center",flexDirection:"column",sm:{padding:"10px 12px 10px"}},u.createElement(Se.Dx,{scale:"XS",clamp:2},i),o&&u.createElement(se.x,{marginTop:"8px"},u.createElement(Oe.QE,{scale:"S",clamp:2},o)),c&&u.createElement(se.x,{marginTop:"12px"},u.createElement(xe.F,{scale:"S",clamp:2},c))),r&&r.thumbnailImageId&&u.createElement(se.x,{width:"160px"},u.createElement(ne,{boxShadowRules:Ie,miroId:r.thumbnailImageId,width:160,height:167,strategy:K._S.Resample,focusPercent:[50,50],imgHeight:167,imgWidth:160}))))},we=function(e){return{boxShadow:"inset 0 0 0 1px ".concat(e.baseColor.border.lighter)}},Ne=function(e){var t,n,r,a,i,o=e.paragraph,c=e.spaceTop,l=e.structuredMarkup,s=(0,R.I)(),d=!(null===(t=o.mixtapeMetadata)||void 0===t||null===(n=t.mediaResource)||void 0===n||!n.mediumCatalog),p=(0,ge.a)(he.d,{variables:{catalogId:null===(r=o.mixtapeMetadata)||void 0===r||null===(a=r.mediaResource)||void 0===a||null===(i=a.mediumCatalog)||void 0===i?void 0:i.id},skip:!d}),f=p.loading,g=p.data,h=p.error,m=o.mixtapeMetadata,v=o.type;if(!m||!m.href||!v)return null;var y,E=l||function(e){var t=e.text,n=e.markups;if(!t)return null;var r=n.find((function(e){return"STRONG"===e.type}));if(!r)return null;var a=n.find((function(e){return"EM"===e.type})),i=r.end,o=a?a.end:r.end;return{title:t.slice(r.start,i).trim(),description:a?t.slice(a.start,a.end).trim():null,domain:t.slice(o).trim()||null}}(o),b=[(0,U.qB)(c)],S=!!h||g&&"Catalog"!==g.catalogById.__typename;if(d&&!S)y=u.createElement(Ee,{catalog:null==g?void 0:g.catalogById,loading:f});else{if(!E)return null;b.push(we),y=u.createElement(Pe,{paragraph:o,processedStructuredMarkup:E})}return u.createElement("div",{className:s(b)},y)},Te=n(37269),ke=n(32342),Re=n(39202);var Me=function(e){v()(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S()(t);if(n){var a=S()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return E()(this,e)});function a(){return f()(this,a),r.apply(this,arguments)}return h()(a,[{key:"render",value:function(){var e,t=this.props,n=t.highlights,r=t.inserts,a=t.marginTopOverride,i=t.paragraph,o=t.paragraphStyle,c=t.privateNotes,l=t.richTextStyle,d=t.sequenceAspectRatio,p=t.spaceTop,f=t.loading;switch(o){case ke.qq.IMG:e=u.createElement(s.u6.Consumer,null,(function(e){var t=e.updateWatchedBounds;return u.createElement(fe,{highlights:n,marginTopOverride:a,paragraph:i,paragraphStyle:o,privateNotes:c,richTextStyle:l,sequenceAspectRatio:d,spaceTop:p,updateWatchedBounds:t,loading:f})}));break;case ke.qq.P:case ke.qq.BQ:case ke.qq.PQ:case ke.qq.H1:case ke.qq.H2:case ke.qq.H3:case ke.qq.H4:case ke.qq.ULI:case ke.qq.OLI:case ke.qq.PRE:case ke.qq.Kicker:case ke.qq.Subtitle:case ke.qq.Title:e=u.createElement(Te.Do,{highlights:n,marginTopOverride:a,paragraph:i,paragraphStyle:o,privateNotes:c,richTextStyle:l,spaceTop:p});break;case ke.qq.IFRAME:e=u.createElement(s.u6.Consumer,null,(function(e){var t=e.updateWatchedBounds;return u.createElement(z,{paragraph:i,paragraphStyle:o,richTextStyle:l,spaceTop:p,updateWatchedBounds:t})}));break;case ke.qq.MIXTAPE_EMBED:e=u.createElement(Ne,{paragraph:i,spaceTop:p});break;case ke.qq.COVER_TITLE:case ke.qq.SECTION_CAPTION:case ke.qq.HR:e=null;break;default:(0,Re.v)(o),e=null}return r&&r.length?u.createElement(u.Fragment,null,r.map((function(e){return"before"===e.order&&e.component})),e,r.map((function(e){return"after"===e.order&&e.component}))):e}}]),a}(u.Component),Ce=n(14804),_e=n(21638);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=function(e){var t=e.styleGroup,n=e.postBodyInserts,r=e.richTextStyle,a=e.loading,i=(0,R.I)(),c=We(t),p=t.paragraphViewModels.map((function(e){var c=e.paragraph.name,d=n&&n[c],p=u.createElement(Me,l()({key:e.paragraph.name,inserts:d,loading:a},e));return"Title"===e.paragraphStyle||"Subtitle"===e.paragraphStyle?u.createElement(s.TA,{name:"title",type:"byline",offset:{left:-600},key:"".concat(e.paragraph.name,"-wb"),className:"SHORTFORM_CARD"===r?i((function(e){return o()({zIndex:2,position:"absolute",bottom:"".concat(t.paragraphViewModels[0].marginBottomOverride||0,"px"),margin:"48px 40px"},M.md(e),{margin:"32px 24px"})})):""},p):p}));return c?u.createElement(d.M.Consumer,null,(function(e){return u.createElement(c,{className:i([qe({paragraphStyle:t.paragraphStyle,topSpacing:t.topSpacing,paragraphLayout:t.paragraphLayout,richTextStyle:t.paragraphViewModels[0].richTextStyle,isEmbedded:e,paragraph:t.paragraphViewModels[0].paragraph})])},p)})):u.createElement(u.Fragment,null,p)},je=u.memo(Le),Ae=function(e){var t=[];return e.forEach((function(e){var n=e.paragraphStyle,r=e.paragraph.layout,a=t[t.length-1];a&&Fe(a,e)?a.paragraphViewModels.push(e):t.push({paragraphStyle:n,paragraphLayout:r,topSpacing:e.sequenceSpaceTop||0,paragraphViewModels:[e]})})),t},Fe=function(e,t){if(e.paragraphStyle!==t.paragraphStyle)return!1;if("PRE"===e.paragraphStyle){var n,r=!(null===(n=e.paragraphViewModels[0].paragraph)||void 0===n||!n.codeBlockMetadata);return!t.paragraph.codeBlockMetadata&&!r}var a=t.paragraph.layout;return"OUTSET_ROW"===e.paragraphLayout?"OUTSET_ROW_CONTINUE"===a:e.paragraphLayout===a},qe=function(e){var t=e.paragraphStyle,n=e.topSpacing,r=e.paragraphLayout,i=e.richTextStyle,o=e.isEmbedded,c=e.paragraph;return function(e){var l={};switch(n&&(l.marginTop=(0,J.mu)((function(e){var t=a()(e,1)[0];return"".concat(t,"px")}),n)),t){case"BQ":var u=e.baseColor.border.darker||"";return He(He({},l),{},{boxShadow:"inset ".concat(3,"px 0 0 0 ").concat(u),paddingLeft:"".concat(23,"px"),marginLeft:(0,ke.jH)(i)?"0px":"-20px"});case"PRE":var s=null==c?void 0:c.codeBlockMetadata,d=He(He({},l),{},{overflowX:"auto",fontFamily:_e.zf}),p={padding:"32px",borderRadius:"4px",border:"".concat(e.borderWidth,"px solid ").concat(Ce.V8),background:Ce.kh,color:Ce.kk},f={padding:"20px",borderRadius:0,border:"none",background:e.baseColor.background.normal,color:e.baseColor.text.normal};return He(He({},d),s?p:f);case"PQ":return He(He({},l),{},{paddingLeft:"SERIES"===i?"0px":"30px"});case"ULI":if(o)return Te.Pq}switch(r){case"OUTSET_ROW":return He(He({},l),{},{display:"flex",flexDirection:"row"})}return l}},We=function(e){var t=e.paragraphStyle,n=e.paragraphLayout;switch(t){case"OLI":return"ol";case"ULI":return"ul";case"BQ":case"PQ":return"blockquote";case"PRE":return"pre"}switch(n){case"OUTSET_ROW":return"div"}return null}},46509:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,s:()=>l});var r=n(59713),a=n.n(r),i=n(97217),o=function(e){var t;return(t={},a()(t,i.NJ.BQ,!0),a()(t,i.NJ.PQ,!0),a()(t,i.NJ.H1,!0),a()(t,i.NJ.H2,!0),a()(t,i.NJ.H3,!0),a()(t,i.NJ.HR,!0),a()(t,i.NJ.COVER_TITLE,!0),a()(t,i.NJ.H4,!0),a()(t,i.NJ.OLI,!0),a()(t,i.NJ.P,!0),a()(t,i.NJ.SECTION_CAPTION,!0),a()(t,i.NJ.ULI,!0),a()(t,i.NJ.PRE,!0),a()(t,i.NJ.IFRAME,!1),a()(t,i.NJ.MIXTAPE_EMBED,!1),a()(t,i.NJ.IMG,!1),t)[e]},c=[i.NJ.PQ,i.NJ.H4],l=function(e,t){for(var n=null,r=0;r<e.length&&e[r];r++){var a=e[r].type;if(o(a)){if(!t.includes(a))break;n=r;break}}return n}},30764:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var r=n(67294),a=n(14646),i=n(21638),o=function(e){return{backgroundColor:e.baseColor.background.normal,padding:"2px 4px",fontSize:"75%","> strong":{fontFamily:"inherit"}}},c=function(e){var t=e.children,n=(0,a.I)();return r.createElement("code",{className:n([o,(0,i.XK)()])},t)}},83363:(e,t,n)=>{"use strict";n.d(t,{Vc:()=>E,U7:()=>O,g8:()=>x});var r=n(28655),a=n.n(r),i=n(59713),o=n.n(i),c=n(63038),l=n.n(c),u=n(92471),s=n(67294),d=n(86249),p=n(10374);function f(){var e=a()(["\n  fragment HighlighSegmentContext_paragraph on Paragraph {\n    ...ParagraphRefsMapContext_paragraph\n  }\n  ","\n"]);return f=function(){return e},e}function g(){var e=a()(["\n  fragment HighlighSegmentContext_highlight on Quote {\n    endOffset\n    id\n    paragraphs {\n      name\n    }\n    startOffset\n    userId\n  }\n"]);return g=function(){return e},e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v,y,E=s.createContext({updateHighlightSegments:function(){},highlightSegments:new Map}),b=function(){return new Map},S=function(e,t,n){var r=e.reduce((function(e,r){var a=t.get(r);if(!a||!a.startOffset&&0!==a.startOffset||!a.endOffset&&0!==a.endOffset)return e;if(!e||!e.startOffset&&0!==e.startOffset||!e.endOffset&&0!==e.endOffset)return a;var i=e.endOffset-e.startOffset,o=a.endOffset-a.startOffset;return a.userId===n&&e.userId!==n||i>o?a:e}),null);return r&&r.id},O=function(e){var t=e.children,n=e.highlights,r=e.paragraphs,a=e.viewer,i=n||[],o=s.useMemo((function(){return new Map(i.map((function(e){return[e.id,e]})))}),[i]),c=s.useMemo((function(){return new Map}),[]),u=s.useState(b),p=l()(u,2),f=p[0],g=p[1],h=s.useContext(d.Tz),O=h.activeSelection,x=h.setActiveSelection,I=function(e){var t=c.get(e);if(t){var n=Array.from(t).map((function(e){return f.get(e)})).filter(Boolean).reduce((function(e,t){if(!t.ref.current)return e;var n=t.ref.current.getBoundingClientRect(),r=n.left,a=n.top,i=n.right,o=n.bottom,c=r+window.pageXOffset,l=i+window.pageXOffset,u=a+window.pageYOffset,s=o+window.pageYOffset;return(!e.minLeft||c<e.minLeft)&&(e.minLeft=c),(!e.maxRight||l>e.maxRight)&&(e.maxRight=l),(!e.minTop||u<e.minTop)&&(e.minTop=u),(!e.maxTop||s<e.maxTop)&&(e.maxTop=s),e}),{});return{left:(n.minLeft+n.maxRight)/2,top:n.minTop,bottom:n.maxTop}}},P=function(e){if(e&&e.paragraphs&&(e.startOffset||0===e.startOffset)&&(e.endOffset||0===e.endOffset)){var t=r.find((function(t){var n=t.name;return e&&e.paragraphs[0].name===n}));return t?{isFocused:!1,selectedParagraph:t,highlightId:e.id,startOffset:e.startOffset,endOffset:e.endOffset,menuPosition:I(e.id)}:null}},w={highlightSegments:s.useMemo((function(){var e=new Map;return f.forEach((function(t,n){var r=t.highlightIds,i=function(){O&&O.isFocused||(y=function(){S(r,o,a&&a.id)&&(x(null),v=null,y=null)},v=setTimeout(y,100))},c=m(m({},t),{},{isActive:!!O&&t.highlightIds.includes(O.highlightId),onClick:function(){var e=document.getSelection();if(!e||"Range"!==e.type){var t=S(r,o,a&&a.id),n=o.get(t||""),i=P(n);i&&setTimeout((function(){x(m(m({},i),{},{isFocused:!0}));var e=document.documentElement&&"ontouchstart"in document.documentElement?"touchstart":"click";document.addEventListener(e,(function t(){x(null),document.removeEventListener(e,t)}))}))}}});document.documentElement&&!("ontouchstart"in document.documentElement)&&(c.onMouseEnter=function e(){if(!O||!O.isFocused){v&&y&&(clearTimeout(v),y());var t=S(r,o,a&&a.id),n=o.get(t||""),c=P(n);c&&x(m(m({},c),{},{isFocused:!1,menuMouseEnter:e,menuMouseLeave:i}))}},c.onMouseLeave=i),e.set(n,c)})),e}),[f,o,a,O]),updateHighlightSegments:function(e,t){var n=t.highlightIds,r=t.ref;g((function(t){var i=new Map(t);return i.set(e,{isActive:!!O&&n.includes(O.highlightId),highlightIds:n,ref:r,viewerIsOwner:n.some((function(e){var t=o.get(e);return a&&t&&t.userId===a.id}))}),i})),n.forEach((function(t){var n=c.get(t);n||(n=new Set),n.add(e),c.set(t,n)}))}};return s.createElement(E.Provider,{value:w},t)},x=(0,u.Ps)(g());(0,u.Ps)(f(),p.pK)},38381:(e,t,n)=>{"use strict";n.d(t,{T2:()=>fe});var r=n(319),a=n.n(r),i=n(28655),o=n.n(i),c=n(92471),l=n(67294),u=n(27403),s=n(46509),d=n(14646),p=n(43487),f=n(78870),g=n(61937),h=function(e,t){return{color:"inherit",textDecoration:"Kicker"===e||function(e,t){return["Title"].concat(a()(s.j)).includes(e)&&("CARD"===t||"SHORTFORM_CARD"===t||"INLINE"===t&&"Title"===e)}(e,t)?"none":"underline"}},m=function(e){var t=e.href,n=e.children,r=e.paragraphStyle,a=e.richTextStyle,i=(0,d.I)(),o=(0,p.v9)((function(e){return e.config.authDomain}));if(!(0,g.wY)(t))return n;var c=!(0,f.xm)(t,o);return"STREAM"===a?l.createElement("span",{className:i(h(r,a))},n):l.createElement(u.e,{href:t,className:i(h(r,a)),target:c?"_blank":void 0,disableSourceParam:!0},n)},v=n(30764),y=n(59713),E=n.n(y),b=n(4381),S=n(31889),O=n(43210),x=n(46696);function I(){var e=o()(["\n  fragment DropCap_image on ImageMetadata {\n    id\n    originalHeight\n    originalWidth\n  }\n"]);return I=function(){return e},e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=function(e,t){return{display:"block",float:"left",height:"".concat(t,"px"),marginRight:"12px",position:"relative",width:"".concat(e,"px")}},N=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxWidth:"100%",marginTop:{xs:"-2px",sm:"-2px",md:"11px",lg:"11px",xl:"11px"}},(0,O.m)());function T(e){var t=e.children,n=e.image,r=e.text,a=(0,d.I)(),i=(0,S.F)();if(!n||!n.originalWidth||!n.originalHeight)return l.createElement(l.Fragment,null,t);var o=3*i.newFonts.body.lineHeight.S-5,c=n.originalHeight,u=o*(n.originalWidth/c);return l.createElement("span",{className:a(w(u,o))},l.createElement(b.UV,{alt:r,miroId:n.id,rules:[N],strategy:x._S.Resample,height:o,width:u,freezeGifs:!1}),t)}function k(e){var t,n=(0,d.I)(),r=e.image,a=e.text;return l.createElement(T,e,l.createElement("span",{className:n((t=!!r,{display:"block",float:"left",fontSize:"66px",lineHeight:".83",marginRight:"12px",paddingTop:{xs:"0",sm:"0",md:"7px",lg:"7px",xl:"7px"},position:"relative",opacity:t?"0":null}))},a))}var R=(0,c.Ps)(I()),M=n(32342),C=function(e){switch(e){case"P":case"OLI":case"ULI":case"BQ":case"PRE":return"italic"===(0,M.S$)(e)?{fontStyle:"normal"}:{fontStyle:"italic"};default:return{fontStyle:"inherit"}}},_=function(e){var t=e.children,n=e.paragraphStyle,r=(0,d.I)();return l.createElement("em",{className:r(C(n))},t)},D=/[\r\n↵]/,H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split(D);if(n.length<=1)return e;if(1===e.length&&""===n[0]&&""===n[1])return l.createElement("br",{key:"".concat(t)});""===n[n.length-1]&&n.pop();var r=[];return n.forEach((function(e){r.push(e),r.push("br")})),D.test(e[e.length-1])||r.pop(),l.createElement(l.Fragment,null,r.map((function(e,n){return n%2==0?e||null:l.createElement("br",{key:"".concat(t).concat(n)})})))},L=n(83363),j=function(e,t){return function(n){return{backgroundColor:e&&n.highlightColor.dark||t&&n.highlightColor.normal||n.highlightColor.light,color:"currentColor",cursor:"pointer"}}},A=function(e){var t=e.children,n=e.highlightIds,r=e.segmentId,a=(0,d.I)(),i=l.useRef(null),o=n.some((function(e){return"private-note-selection"===e})),c=l.useContext(L.Vc),u=c.highlightSegments,s=c.updateHighlightSegments,p=u.get(r),f=p||{},g=f.isActive,h=f.viewerIsOwner,m=f.onClick,v=f.onMouseEnter,y=f.onMouseLeave;return l.useEffect((function(){o||p&&p.ref&&p.ref.current&&n.length===p.highlightIds.length&&n.every((function(e){return p.highlightIds.includes(e)}))||s(r,{highlightIds:n,ref:i})}),[n,i]),l.createElement("mark",{className:a(j(g||o,!!h)),onClick:m,onMouseEnter:v,onMouseLeave:y,ref:i},t)},F=l.memo(A),q=n(46484),W=n(35283),U=n(21638),Q=function(e,t,n){return function(r){switch(e){case"P":case"BQ":case"OLI":case"ULI":return t?(0,U.OA)()(r):n?(0,U.qd)()(r):{fontFamily:r.newFonts.body.family,fontWeight:r.newFonts.body.boldWeight};case"PRE":return(0,U.t5)()(r);case"IMG":return{fontFamily:r.newFonts.detail.family,fontWeight:r.newFonts.detail.boldWeight};default:return{fontWeight:"inherit"}}}},B=function(e){var t=e.children,n=e.paragraphStyle,r=(0,d.I)(),a=l.useContext(W.H).threadDepthOnPage;return l.createElement(q.M.Consumer,null,(function(e){return l.createElement("strong",{className:r(Q(n,!!a,e))},t)}))},G=n(64718),z=n(27517),V=n(21417),$=n(28695),X=n(54341),Y=n(26244),J=n(50458);function K(){var e=o()(["\n  query UserMentionTooltipQuery($userId: ID!) {\n    user(id: $userId) {\n      ...UserMentionTooltip_user\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var Z=function(e){return{background:"none",color:e.accentColor.text.normal,textDecoration:"none"}},ee={display:"inline-block",width:"auto"},te=(0,z.$j)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var t=e.children,n=e.userId,r=e.richTextStyle,a=e.authDomain,i=(0,d.I)(),o=(0,G.a)(ne,{variables:{userId:n},ssr:!1}).data,c=null==o?void 0:o.user,s=l.createElement(u.e,{target:"_blank",href:(0,J.bUn)(a,n),className:i(Z)},t);return"STREAM"===r?l.createElement("span",{className:i(Z)},t):l.createElement(V.b,{name:"enable_author_cards",placeholder:function(){return s}},(function(e){return e&&c?l.createElement("div",{className:i(ee)},l.createElement(Y.$,{placement:"right",targetDistance:15,mouseLeaveDelay:200,popoverRenderFn:function(){return c&&l.createElement($.K,{user:c})},fallbackPlacements:["top","bottom"]},l.createElement(u.e,{target:"_blank",href:(0,J.bUn)(a,n),className:i(Z)},t))):s}))})),ne=(0,c.Ps)(K(),X.O);function re(){var e=o()(["\n  fragment MarkupNode_data_dropCapImage on ImageMetadata {\n    ...DropCap_image\n  }\n  ","\n"]);return re=function(){return e},e}var ae=(0,c.Ps)(re(),R),ie=function e(t){var n=t.data,r=t.prefix,a=t.paragraphStyle,i=t.richTextStyle;if("string"==typeof n)return H(n,r);var o=n.children.map((function(t,n){return"string"==typeof t?H(t,"".concat(r).concat(n)):l.createElement(e,{key:n,data:t,paragraphStyle:a,prefix:"".concat(r).concat(n),richTextStyle:i})}));switch(n.type){case"A":return l.createElement(m,{href:n.href,paragraphStyle:a,richTextStyle:i},o);case"CODE":return"PRE"===a?l.createElement(l.Fragment,null,o):l.createElement(v.E,null,o);case"DROPCAP":var c=o[0];return c&&"string"==typeof c?"BQ"===a||"PQ"===a?c:l.createElement(k,{text:c,image:n.dropCapImage}):null;case"EM":return l.createElement(_,{paragraphStyle:a},o);case"QUOTE":return l.createElement(F,{highlightIds:n.highlightIds,segmentId:n.segmentId,key:n.segmentId},o);case"STRONG":return l.createElement(B,{paragraphStyle:a},o);case"ID_WRAPPER":return l.createElement("span",{id:n.wrapperId},o);case"USER_MENTION":return l.createElement(te,{userId:n.userId,richTextStyle:i},o);case"HLJS_MARKUP":return l.createElement("span",{className:"hljs-"+n.className},o);default:return null}},oe=l.memo(ie);function ce(){var e=o()(["\n  fragment Markups_paragraph on Paragraph {\n    name\n    text\n    hasDropCap\n    dropCapImage {\n      ...MarkupNode_data_dropCapImage\n    }\n    markups {\n      type\n      start\n      end\n      href\n      anchorType\n      userId\n      linkMetadata {\n        httpStatus\n      }\n    }\n  }\n  ","\n"]);return ce=function(){return e},e}function le(){var e=o()(["\n  fragment Markups_highlight on Quote {\n    id\n    paragraphs {\n      name\n    }\n    startOffset\n    endOffset\n    userId\n  }\n"]);return le=function(){return e},e}var ue="ABCDEFGHIJKLMNOPQRSTUVWXYZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƏǺǼǾȘȚẀẂẄẞỲΩ∆",se="abcdefghijklmnopqrstuvwxyzµßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿāăąćĉċčďđēĕėęěĝğġģĥħĩīĭįıĳĵķĸĺļľŀłńņňŉŋōŏőœŕŗřśŝşšţťŧũūŭůűųŵŷźżžſǻǽǿșțȷəẁẃẅỳ",de=new RegExp("^["+ue+"]["+se+"\\,\\.](?= )|^["+ue+"]’(?=["+se+"])|^[’‘“„”]?["+ue+"]|^[0-9]{1,4}\\.?(?![0-9])"),pe=function(e){var t=e.highlights,n=e.paragraph,r=e.paragraphStyle,a=e.richTextStyle,i=e.allowDropCap,o=void 0!==i&&i,c=e.hljsMarkups;return me(n,a,o,t||[],c).map((function(e,t){return l.createElement(oe,{key:t,data:e,paragraphStyle:r,prefix:t.toString(),richTextStyle:a})}))},fe=l.memo(pe),ge=((0,c.Ps)(le()),(0,c.Ps)(ce(),ae),function(e){return null!=e.type&&null!=e.start&&null!=e.end}),he=function(e,t){var n={COMMENT:1,HIGHLIGHT:2,FULL_HIGHLIGHT:3,HIGHLIGHT_SEGMENT:4,QUOTE:5,QUERY:6,CODE:7,A:8,STRONG:9,EM:10,WARNING:11,DROPCAP:12,ID_WRAPPER:13,UNUSED_DETAIL:14,SENTENCE_DEPRECATED:15,HLJS_MARKUP:16};if(null==e.type||null==e.start||null==e.end||null==t.type||null==t.start||null==t.end)throw new Error("Comparing markups requires type, start, and end fields.");var r=n[e.type]-n[t.type];if(0!==r)return r;if("HLJS_MARKUP"===e.type&&"HLJS_MARKUP"===t.type){var a=e.priority-t.priority;if(0!==a)return a}if(0!=(r=e.start-t.start))return r;if(0!=(r=e.end-t.end))return r;var i=JSON.stringify(e),o=JSON.stringify(t);return i>o?1:i<o?-1:0},me=function(e,t,n,r,i){var o=e.dropCapImage,c=[],l=function(e,t,n,r,i){var o=e.hasDropCap,c=e.text;if(!c)return[];var l=n&&("FULL_PAGE"===t||"INLINE"===t)&&o,u=e.text?e.text.length:0,s=r.map((function(t){return{type:"FULL_HIGHLIGHT",highlightId:t.id,start:t.startOffset||0,end:t.paragraphs[0].name===e.name&&t.endOffset||u-1}})),d=void 0!==i?[].concat(a()(s),a()(i)).filter(ge):[].concat(a()(e.markups),a()(s)).filter(ge),p=new Set;p.add(0),p.add(c.length),d.forEach((function(e){p.add(e.start),p.add(e.end)}));var f=[];if(d.slice().sort(he).forEach((function(e){f.push(e)})),l){var g=function(e){if(!e)return"";var t=de.exec(e),n=t?t[0]:"";return n.length>=e.trim().length?"":n}(e.text);g.length>0&&(p.add(g.length),f.unshift({type:"DROPCAP",start:0,end:g.length}))}var h=Array.from(p).sort((function(e,t){return e-t})),m=h.map((function(e,t){var n;return{point:e,markups:f.filter((function(t){return t.start<=e&&t.end>e})).reduce((function(r,a){return"FULL_HIGHLIGHT"===a.type?(n||(n={type:"HIGHLIGHT_SEGMENT",highlightIds:[],start:e,end:h[t]-1},r.push(n)),n.highlightIds.push(a.highlightId)):r.push(a),r}),[])}}));if(l){var v=m[0].markups.filter((function(e){return"DROPCAP"===e.type}));if(v.length>0){var y=v[0];m[0].markups=[y]}}return m}(e,t,n,r,i),u=[],s=[];return l.forEach((function(t,n){var r=t.point,a=t.markups,i=(l[n+1]||l[l.length-1]).point,d=(e.text||"").slice(r,i);u=s,s=[];var p=!1,f=c,g=function(e){s.push(e);var t=e.markupNodeData;"string"!=typeof t&&(f=t.children)};a.forEach((function(t,n){var r=u[n];if(!p&&r&&r.markup===t)g({markup:t,markupNodeData:r.markupNodeData});else{p=!0;var a=ve(t,o,e);a&&(f.push(a),g({markup:t,markupNodeData:a}))}})),f.push(d)})),c},ve=function(e,t,n){switch(e.type){case"A":return"LINK"!==e.anchorType&&e.anchorType?"USER"===e.anchorType&&e.userId?{type:"USER_MENTION",userId:e.userId,children:[]}:null:e.href?{type:"A",href:e.href,children:[]}:null;case"CODE":return{type:"CODE",children:[]};case"DROPCAP":return{type:"DROPCAP",dropCapImage:t,children:[]};case"EM":return{type:"EM",children:[]};case"STRONG":return{type:"STRONG",children:[]};case"ID_WRAPPER":return{type:"ID_WRAPPER",wrapperId:e.wrapperId,children:[]};case"HIGHLIGHT":return{type:"QUOTE",highlightIds:[],segmentId:"".concat(n.name||"","_").concat(e.start),children:[]};case"HIGHLIGHT_SEGMENT":return{type:"QUOTE",highlightIds:e.highlightIds,segmentId:"".concat(n.name||"","_").concat(e.start),children:[]};case"HLJS_MARKUP":return{type:"HLJS_MARKUP",className:e.className,children:[]};default:return null}}},44651:(e,t,n)=>{"use strict";n.d(t,{A7:()=>Ue});var r=n(28655),a=n.n(r),i=n(319),o=n.n(i),c=n(63038),l=n.n(c),u=n(92471),s=n(67294),d=n(75119),p=n(92947),f=n(69217),g=n(27517),h=n(63459),m=n(14294),v=n(89976),y=n(59713),E=n.n(y),b=n(32493);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(){var e=a()(["\n  query NoteDeleteMutation_postNotes($postId: ID!) {\n    post(id: $postId) {\n      id\n      privateNotes {\n        id\n      }\n    }\n  }\n"]);return x=function(){return e},e}function I(){var e=a()(["\n  mutation NoteDeleteMutation($targetPostId: ID!, $targetNoteId: ID!) {\n    deleteNote(targetPostId: $targetPostId, targetNoteId: $targetNoteId)\n  }\n"]);return I=function(){return e},e}var P=(0,u.Ps)(I()),w=(0,u.Ps)(x()),N=(0,g.$j)()((function(e){var t=e.children,n=e.onCompleted,r=e.targetPostId,a=e.targetNoteId;return s.createElement(b.m,{mutation:P,onCompleted:n,optimisticResponse:{deleteNote:!0},update:function(e){var t=e.readQuery({query:w,variables:{postId:r}}),n={post:O(O({},t.post),{},{privateNotes:t.post.privateNotes.filter((function(e){return e.id!==a}))})};e.writeQuery({query:w,variables:{postId:r},data:n})},variables:{targetPostId:r,targetNoteId:a}},(function(e){return t({mutate:e})}))}));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(){var e=a()(["\n  query NoteDismissMutation_postNotes($postId: ID!) {\n    post(id: $postId) {\n      id\n      privateNotes {\n        id\n      }\n    }\n  }\n"]);return R=function(){return e},e}function M(){var e=a()(["\n  mutation NoteDismissMutation($targetPostId: ID!, $targetNoteId: ID!) {\n    dismissNote(targetPostId: $targetPostId, targetNoteId: $targetNoteId)\n  }\n"]);return M=function(){return e},e}var C=(0,u.Ps)(M()),_=(0,u.Ps)(R()),D=(0,g.$j)()((function(e){var t=e.children,n=e.onCompleted,r=e.targetPostId,a=e.targetNoteId;return s.createElement(b.m,{mutation:C,onCompleted:n,optimisticResponse:{dismissNote:!0},update:function(e){var t=e.readQuery({query:_,variables:{postId:r}}),n={post:k(k({},t.post),{},{privateNotes:t.post.privateNotes.filter((function(e){return e.id!==a}))})};e.writeQuery({query:_,variables:{postId:r},data:n})},variables:{targetPostId:r,targetNoteId:a}},(function(e){return t({mutate:e})}))}));function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(){var e=a()(["\n  mutation NoteReplyCreateMutation($targetPostId: ID!, $targetNoteId: ID!, $replyContent: String!) {\n    createNoteReply(\n      targetPostId: $targetPostId\n      targetNoteId: $targetNoteId\n      replyContent: $replyContent\n    ) {\n      id\n      ...NoteReplyCreateMutation_privateNoteReply\n    }\n  }\n  ","\n"]);return j=function(){return e},e}function A(){var e=a()(["\n  query NoteReplyCreateMutation_postNotes($postId: ID!) {\n    post(id: $postId) {\n      id\n      privateNotes {\n        id\n        replies {\n          id\n          ...NoteReplyCreateMutation_privateNoteReply\n        }\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}function F(){var e=a()(["\n  fragment NoteReplyCreateMutation_privateNoteReply on NoteReply {\n    id\n    noteId\n    author {\n      id\n    }\n    content\n    createdAt\n    postId\n  }\n"]);return F=function(){return e},e}var q=(0,u.Ps)(F()),W=(0,u.Ps)(A(),q),U=(0,u.Ps)(j(),q),Q=function(e){var t=e.children,n=e.targetPostId,r=e.targetNoteId;return s.createElement(b.m,{mutation:U,update:function(e,t){var a=e.readQuery({query:W,variables:{postId:n}}),i=a.post.privateNotes.map((function(e){return e.id!==r?e:L(L({},e),{},{replies:[].concat(o()(e.replies),[t.data.createNoteReply])})})),c={post:L(L({},a.post),{},{privateNotes:i})};e.writeQuery({query:W,variables:{postId:n},data:c})}},(function(e){return t({mutate:function(t){return e(L(L({},t),{},{variables:L({targetPostId:n,targetNoteId:r},t&&t.variables)}))}})}))};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(){var e=a()(["\n  query PostNotesReplies($postId: ID!) {\n    post(id: $postId) {\n      id\n      privateNotes {\n        id\n        replies {\n          id\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}function V(){var e=a()(["\n  mutation NoteReplyDeleteMutation($targetPostId: ID!, $targetNoteId: ID!, $targetReplyId: ID!) {\n    deleteNoteReply(\n      targetPostId: $targetPostId\n      targetNoteId: $targetNoteId\n      targetReplyId: $targetReplyId\n    )\n  }\n"]);return V=function(){return e},e}var $=(0,u.Ps)(V()),X=(0,u.Ps)(z()),Y=function(e){var t=e.children,n=e.targetPostId,r=e.targetNoteId,a=e.targetReplyId;return s.createElement(b.m,{mutation:$,optimisticResponse:{deleteNoteReply:!0},update:function(e){var t=e.readQuery({query:X,variables:{postId:n}}),i=t.post.privateNotes.map((function(e){return e.id!==r?e:G(G({},e),{},{replies:e.replies.filter((function(e){return e.id!==a}))})})),o={post:G(G({},t.post),{},{privateNotes:i})};e.writeQuery({query:X,variables:{postId:n},data:o})},variables:{targetPostId:n,targetNoteId:r,targetReplyId:a}},(function(e){return t({mutate:e})}))},J=n(21919);function K(){var e=a()(["\n  mutation NoteReplyReportMutation($targetId: ID!) {\n    reportNoteReply(targetNoteReplyId: $targetId)\n  }\n"]);return K=function(){return e},e}var Z=(0,u.Ps)(K());function ee(){var e=a()(["\n  mutation NoteReportMutation($targetId: ID!) {\n    reportNote(targetNoteId: $targetId)\n  }\n"]);return ee=function(){return e},e}var te=(0,u.Ps)(ee()),ne=n(82865),re=n(25267),ae=n(67701),ie=n(17193),oe=n(27048),ce=n(77355),le=n(93310),ue=n(66227),se=n(1383),de=n(87691),pe=n(78285),fe=n(43487),ge=n(50458),he=n(68216);function me(){var e=a()(["\n  fragment PostViewNoteCard_privateNote on Note {\n    id\n    author {\n      id\n      ...PostViewNoteCard_user\n    }\n    content\n    createdAt\n    postId\n    post {\n      id\n      creator {\n        id\n      }\n      collection {\n        id\n      }\n    }\n    replies {\n      id\n      ...PostViewNoteCard_noteReply\n    }\n    selectionStartOffset\n    selectionEndOffset\n  }\n  ","\n  ","\n"]);return me=function(){return e},e}function ve(){var e=a()(["\n  fragment PostViewNoteCard_paragraph on Paragraph {\n    name\n  }\n"]);return ve=function(){return e},e}function ye(){var e=a()(["\n  fragment PostViewNoteCard_noteReply on NoteReply {\n    id\n    author {\n      id\n      ...PostViewNoteCard_user\n    }\n    content\n    createdAt\n    noteId\n    postId\n  }\n  ","\n"]);return ye=function(){return e},e}function Ee(){var e=a()(["\n  fragment PostViewNoteCard_user on User {\n    id\n    name\n    username\n    ...UserAvatar_user\n    ...userUrl_user\n  }\n  ","\n  ","\n"]);return Ee=function(){return e},e}var be=function(e){var t=e.timestamp;return t?n.g.Date.now()-t<864e5?s.createElement(v.b,{timestamp:t}):s.createElement(h.E,{timestamp:t}):null},Se=function(e){var t=(0,fe.v9)((function(e){return e.config.authDomain})),n=e.author,r=e.content,a=e.createdAt,i=e.id,o=e.isNote,c=e.onDelete,u=e.onReportError,d=function(e){var t=e.onError,n=e.targetId;return(0,J.D)(Z,{onError:t,variables:{targetId:n},optimisticResponse:{reportNoteReply:!0}})}({onError:u,targetId:i}),p=function(e){var t=e.onCompleted,n=e.onError,r=e.targetId;return(0,J.D)(te,{onCompleted:t,onError:n,optimisticResponse:{reportNote:!0},variables:{targetId:r}})}({onError:u,targetId:i});if(!n)return null;var f=o?p:d,g=l()(f,2),h=g[0],v=g[1],y=v.called,E=v.error,b=v.loading;return E&&u(),s.createElement(re.I,{nonBlocking:!0},(function(e){return s.createElement(ce.x,{padding:"12px 0"},s.createElement(ce.x,{display:"flex",alignItems:"center",marginBottom:"12px"},s.createElement(ce.x,{marginRight:"12px"},s.createElement(ie.Yt,{scale:"XS",user:n,link:!0})),s.createElement(ce.x,{flexGrow:"1",flexShrink:"1"},s.createElement(de.F,{scale:"M",tag:"h4",color:"DARKER",clamp:1},s.createElement(le.r,{href:(0,ge.AWr)(n,t),inline:!0},n.name)),s.createElement(de.F,{scale:"M"},s.createElement(be,{timestamp:a}))),e&&e.id===n.id&&s.createElement(ce.x,{alignSelf:"flex-start",marginLeft:"12px"},s.createElement(de.F,{scale:"M",tag:"div"},s.createElement(le.r,{linkStyle:"SUBTLE",onClick:c},"Delete"))),e&&e.id!==n.id&&s.createElement(ce.x,{alignSelf:"flex-start"},s.createElement(de.F,{scale:"M",tag:"div"},s.createElement(ue.B,null,(function(e){var t=e.isVisible,n=e.show,r=e.hide;return s.createElement(ce.x,null,s.createElement(se.Q,{confirmText:"Report",hide:r,isVisible:t,onConfirm:h,titleText:"Confirm",isDestructiveAction:!0},"Are you sure you want to report this note?"),s.createElement(le.r,{linkStyle:"SUBTLE",onClick:n,disabled:y||b},y?"Reported":"Report"))}))))),s.createElement(ce.x,{whiteSpace:"pre-wrap"},s.createElement(de.F,{scale:"M",tag:"span",color:"DARKER"},s.createElement(m.P,{target:"_blank"},r))))}))},Oe=function(e){var t=e.note,n=e.exitReplyingMode;return s.createElement(ce.x,{padding:"12px 0"},s.createElement(Q,{targetPostId:t.postId,targetNoteId:t.id},(function(e){var t=e.mutate;return s.createElement(ne.$,{onSubmit:function(e){t({variables:{replyContent:e}}),n()},onCancel:n})})))},xe=function(e){var t=e.note,n=e.isReplyingMode,r=e.exitReplyingMode,a=e.dispatch,i=t.replies;return 0!==i.length||n?s.createElement(ce.x,{tag:"ol",marginLeft:"20px"},i.map((function(e){return s.createElement("li",{key:e.id},s.createElement(Y,{targetPostId:e.postId,targetNoteId:e.noteId,targetReplyId:e.id},(function(t){var n=t.mutate;return s.createElement(Se,{author:e.author,content:e.content,createdAt:e.createdAt,onDelete:function(){n(),a((0,pe.Dx)({duration:5e3,message:"The reply has been deleted."}))},id:e.id,isNote:!1,onReportError:function(){a((0,pe.Dx)({duration:5e3,toastStyle:"ERROR",message:"An error occurred while reporting this reply."}))}})})))})),n&&s.createElement("li",{key:"reply-new"},s.createElement(Oe,{note:t,exitReplyingMode:r}))):null},Ie=(0,g.$j)()((function(e){var t,n=e.isLast,r=e.isReplyingMode,a=e.onReplyClick,i=e.note,o=e.dispatch,c=e.viewer,l=(0,d.Zx)().setPrivateNoteSelection,u=(0,ae.gY)(null===(t=i.post)||void 0===t?void 0:t.collection).viewerEdge;if(!c||!i.post)return null;var p=!r,f=i.post.creator&&i.post.creator.id&&i.post.creator.id===c.id||(null==u?void 0:u.isEditor),g=p&&s.createElement(de.F,{scale:"M",tag:"div"},s.createElement(le.r,{linkStyle:"OBVIOUS",onClick:a},"Reply")),h=f&&s.createElement(D,{targetPostId:i.postId,targetNoteId:i.id},(function(e){var t=e.mutate;return s.createElement(ce.x,{flexGrow:"1",flexShrink:"1",textAlign:"right"},s.createElement(de.F,{scale:"M",tag:"span"},s.createElement(le.r,{linkStyle:"SUBTLE",onClick:function(){t(),l(null),o((0,pe.Dx)({duration:5e3,message:"The note has been dismissed."}))}},"Dismiss note")))}));return g||h||!n?s.createElement(ce.x,{display:"flex",borderTop:"BASE_LIGHTER",padding:"12px 0",marginTop:"8px",marginBottom:n?"0":"16px"},g,h):null})),Pe=(0,g.$j)()((function(e){var t=e.dispatch,n=e.isLast,r=e.paragraph,a=e.note,i=s.useState(!1),o=l()(i,2),c=o[0],u=o[1],p=(0,d.Zx)().setPrivateNoteSelection;return s.useEffect((function(){if((a.selectionStartOffset||0===a.selectionStartOffset)&&(a.selectionEndOffset||0===a.selectionEndOffset))return p({id:"private-note-selection",paragraphs:[r],userId:null,startOffset:a.selectionStartOffset,endOffset:a.selectionEndOffset,user:void 0}),function(){return p(null)}}),[]),s.createElement(ce.x,{padding:"0 20px"},s.createElement(N,{targetPostId:a.postId,targetNoteId:a.id},(function(e){var n=e.mutate;return s.createElement(Se,{author:a.author,createdAt:a.createdAt,content:a.content,id:a.id,isNote:!0,onDelete:function(){n(),p(null),t((0,pe.Dx)({duration:5e3,message:"The note has been deleted."}))},onReportError:function(){t((0,pe.Dx)({duration:5e3,toastStyle:"ERROR",message:"An error occurred while reporting this note."}))}})})),s.createElement(xe,{note:a,isReplyingMode:c,exitReplyingMode:function(){u(!1)},dispatch:t}),s.createElement(re.I,{nonBlocking:!0},(function(e){return s.createElement(Ie,{note:a,viewer:e,isLast:n,isReplyingMode:c,onReplyClick:function(){return u(!0)}})})))})),we=(0,u.Ps)(Ee(),oe.W,he.$m),Ne=(0,u.Ps)(ye(),we),Te=(0,u.Ps)(ve()),ke=(0,u.Ps)(me(),we,Ne),Re=n(68349),Me=n(78817),Ce=n(18627),_e=n(14646);function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var He=s.createElement("path",{d:"M14.78 8.07a8.68 8.68 0 0 0-.43-1.38.48.48 0 0 0-.58-.27l-3.12.77V4.03c0-.24-.2-.48-.43-.5a7.23 7.23 0 0 0-1.38 0c-.24.02-.43.26-.43.5V7.2L5.3 6.41a.48.48 0 0 0-.58.27c-.18.45-.33.92-.43 1.39-.05.24.1.5.32.58l3.06.75-1.98 2.96c-.14.2-.13.5.04.67.34.33.7.63 1.1.9.2.13.48.07.62-.12l2.1-3.12 2.08 3.12c.15.19.43.25.63.11a7.7 7.7 0 0 0 1.1-.89.53.53 0 0 0 .03-.67L11.4 9.41l3.06-.76a.52.52 0 0 0 .32-.58",fillRule:"evenodd"});const Le=function(e){return s.createElement("svg",De({width:19,height:19},e),He)};var je=n(68894);function Ae(){var e=a()(["\n  fragment PostAnnotationsMarker_privateNote on Note {\n    ...PostViewNoteCard_privateNote\n  }\n  ","\n"]);return Ae=function(){return e},e}function Fe(){var e=a()(["\n  fragment PostAnnotationsMarker_paragraph on Paragraph {\n    ...PostViewNoteCard_paragraph\n  }\n  ","\n"]);return Fe=function(){return e},e}var qe={float:"right",position:"relative",width:"0",height:"0"},We={position:"absolute",left:0,top:0,fontSize:0,lineHeight:0,userSelect:"none","-webkit-user-select":"none"},Ue=function(e){var t=e.paragraph,n=e.privateNotes,r=(0,_e.I)(),a=(0,Ce.Av)(),i=(0,d.Zx)(),c=i.openPrivateNoteId,u=i.setOpenPrivateNoteId,g=i.privateNoteSelection,h=i.setPrivateNoteSelection,m=n.map((function(e){return e.id})),v=s.useMemo((function(){return new Set(m)}),[m]),y=s.useRef(null),E=(0,je.O)(!1),b=l()(E,4),S=b[0],O=b[1],x=b[2],I=b[3];if(s.useEffect((function(){c&&v.has(c)&&!S&&y.current&&(O(),window.scrollTo({top:y.current.offsetTop}))}),[c]),!n||0===n.length)return null;var P=n[0].postId,w=Math.min.apply(Math,o()(n.map((function(e){var t;return null!==(t=e.selectionStartOffset)&&void 0!==t?t:0})))),N=Math.max.apply(Math,o()(n.map((function(e){var t;return null!==(t=e.selectionEndOffset)&&void 0!==t?t:0}))));return s.createElement("span",{className:r(qe),ref:y},s.createElement(f.G,{isVisible:S,hide:function(){u(null),x()},popoverRenderFn:function(){return s.createElement(p.Y,null,n.map((function(e,r){return s.createElement(Pe,{isLast:r===n.length-1,key:e.id,note:e,paragraph:t})})))}},s.createElement("span",{className:r(We)},s.createElement(Re.D,{onMouseEnter:function(){h({id:"private-note-hover",paragraphs:[t],userId:null,startOffset:w,endOffset:N,user:void 0})},onMouseLeave:function(){"private-note-hover"===(null==g?void 0:g.id)&&h(null)}},s.createElement(Me.P,{onClick:function(){I(),a.event("notes.ui.showNotes",{postId:P,noteIds:m})}},s.createElement(Le,{"aria-label":"View ".concat(n.length," Private Notes")}))))))};(0,u.Ps)(Fe(),Te),(0,u.Ps)(Ae(),ke)},92947:(e,t,n)=>{"use strict";n.d(t,{Y:()=>f});var r=n(67294),a=n(18733),i=n(77355),o=n(93310),c=n(8431),l=n(87691);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=r.createElement("path",{d:"M14 14.05a1 1 0 0 1-1 1H6a.99.99 0 0 1-1-1v-4a1 1 0 0 1 1-1h7a.99.99 0 0 1 1 1v4zm-7-8.6c0-1.26 1.11-2.3 2.5-2.3S12 4.19 12 5.45v2.6H7v-2.6zm6 2.6v-2.6c0-1.83-1.58-3.3-3.5-3.3S6 3.62 6 5.45v2.6a2 2 0 0 0-2 2v4a1.99 1.99 0 0 0 2 2h7a2 2 0 0 0 2-2v-4a1.99 1.99 0 0 0-2-2z",fillRule:"evenodd"});const d=function(e){return r.createElement("svg",u({width:19,height:19},e),s)};var p=n(50458),f=function(e){return r.createElement(a.N8,null,r.createElement(i.x,{width:"400px",backgroundColor:"BACKGROUND"},r.createElement(i.x,{backgroundColor:"BASE_DARK",padding:"12px 20px",display:"flex",alignItems:"center"},r.createElement(i.x,{marginLeft:"-4px",marginRight:"8px"},r.createElement(d,null)),r.createElement(i.x,{flexGrow:"1",flexShrink:"1",position:"relative",top:"1px"},r.createElement(c.Lh,{tag:"h4"},r.createElement(l.F,{scale:"S",tag:"span",color:"DARKER"},"Private Notes"))),r.createElement(i.x,{position:"relative",top:"1px"},r.createElement(l.F,{scale:"S",color:"DARKER"},r.createElement(o.r,{href:(0,p.qPp)(),inline:!0,target:"_blank",linkStyle:"SUBTLE"},"Learn more")))),e.children))}},69217:(e,t,n)=>{"use strict";n.d(t,{G:()=>g});var r=n(67154),a=n.n(r),i=n(63038),o=n.n(i),c=n(67294),l=n(18736),u=n(7157),s=n(1593),d=n(14646),p=function(e){return{background:e.backgroundColor,boxSizing:"border-box",border:"1px solid ".concat(e.baseColor.border.lighter),borderRadius:"".concat(e.borderRadius.regular,"px"),boxShadow:"0 1px 4px ".concat(e.baseColor.border.lighter),maxHeight:"100vh",overflowY:"auto"}},f=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},g=function(e){var t=e.boundariesElement,n=void 0===t?"viewport":t,r=e.children,i=e.popoverRenderFn,g=e.isVisible,h=e.hide,m=e.placement,v=void 0===m?"right-start":m,y=e.referenceHeight,E=e.reference,b=(0,d.I)(),S={display:"block",height:y},O=c.useState(null),x=o()(O,2),I=x[0],P=x[1],w=c.useState(null),N=o()(w,2),T=N[0],k=N[1],R=c.useCallback((function(e){return P(e)}),[]),M=c.useCallback((function(e){return k(e)}),[]),C=(0,l.D)(E||I,T,{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",options:{altAxis:!0,rootBoundary:n,padding:15}}],placement:v}),_=C.styles,D=C.attributes,H=C.update,L=c.createElement(u.i,{disableOverlay:!1,onClick:function(e){return(0,s.fF)(h,e)},onKeyDown:function(e){return(0,s.cD)(h,e)}},c.createElement("div",{onClick:f},c.createElement("div",a()({ref:M,style:_.popper,className:b(p)},D.popper),c.createElement("div",null,i(H)))));return c.createElement(c.Fragment,null,E?r:c.createElement("span",{ref:R,className:b(S)},r),g?L:null)}},82865:(e,t,n)=>{"use strict";n.d(t,{X:()=>E,$:()=>S});var r=n(67154),a=n.n(r),i=n(63038),o=n.n(i),c=n(67294),l=n(91553),u=n(25267),s=n(17193),d=n(77355),p=n(93310),f=n(87691),g=n(14199),h=n(14646),m={border:"none",display:"block",resize:"none",width:"100%",":focus":{outline:"none"}},v=function(e){var t=e.onSubmit,n=e.onCancel,r=e.thresholdMaxChars,a=e.thresholdCharsShowIndicator,i=e.placeholderText,v=e.numTextAreaLines,y=(0,h.I)(),E=c.useState(""),b=o()(E,2),S=b[0],O=b[1],x=c.useRef(null);c.useEffect((function(){x.current&&"function"==typeof x.current.focus&&setTimeout((function(){x.current&&x.current.focus()}))})),(0,l.a)({disabled:!S,message:"Note input not empty"});var I=function(e){var t=e.target.value;O(t)},P=(0,g.n)({name:"detail",scale:"M",color:"DARKER"});return c.createElement(u.I,null,(function(e){return!!e&&c.createElement(d.x,null,c.createElement(d.x,{display:"flex",alignItems:"center",marginBottom:"12px"},c.createElement(d.x,{marginRight:"12px"},c.createElement(s.Yt,{scale:"XS",user:e})),c.createElement(f.F,{scale:"M",tag:"h5",color:"DARKER",clamp:1},e&&e.name||"")),c.createElement(d.x,{marginBottom:"12px",tag:"label"},c.createElement("textarea",{ref:x,required:!0,placeholder:i,value:S,rows:v,onChange:I,className:y([P,m])}),S.length>=a&&c.createElement(d.x,{marginTop:"4px"},c.createElement(f.F,{scale:"XS",color:S.length>r?"ERROR":"LIGHTER"},S.length,"/",r))),c.createElement(f.F,{scale:"M",tag:"div"},c.createElement(d.x,{display:"flex",justifyContent:"space-between"},c.createElement(d.x,{display:"flex"},c.createElement(p.r,{disabled:0===S.length||S.length>r,linkStyle:"OBVIOUS",onClick:function(){t(S)}},"Send")),c.createElement(d.x,{display:"flex"},c.createElement(p.r,{linkStyle:"SUBTLE",onClick:n},"Cancel")))))}))},y={thresholdMaxChars:400,thresholdCharsShowIndicator:255,placeholderText:"Write a note…",numTextAreaLines:5},E=function(e){return c.createElement(v,a()({},y,e))},b={thresholdMaxChars:200,thresholdCharsShowIndicator:133,placeholderText:"Leave a reply…",numTextAreaLines:3},S=function(e){return c.createElement(v,a()({},b,e))}},60748:(e,t,n)=>{"use strict";function r(e){e&&e.iframe&&e.height&&e.iframe.getAttribute&&"number"==typeof e.height&&o({context:"iframe.resize",height:e.height,src:e.iframe.getAttribute("src")||""})}function a(e){if(e.data&&"string"==typeof e.data){var t;try{t=JSON.parse(e.data)}catch(e){return}o(t,e.source)}}n.d(t,{x:()=>c});var i=[];function o(e,t){i.forEach((function(n){return n(e,t)}))}function c(e){return window._resizeIframe||(window._resizeIframe=r,window.addEventListener("message",a)),i.push(e),{destructor:function(){0===(i=i.filter((function(t){return e!==t}))).length&&"undefined"!=typeof window&&(window._resizeIframe=null,window.removeEventListener("message",a))}}}},78882:(e,t,n)=>{"use strict";n.d(t,{d:()=>l,b:()=>c});var r=n(319),a=n.n(r),i=n(47418),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CatalogMixtapeParagraph_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EmbedCatalog_catalog"}}]}}].concat(a()(i.E.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MixtapeParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"mixtapeMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"href"}},{kind:"Field",name:{kind:"Name",value:"mediaResource"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediumCatalog"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"GenericMixtapeParagraph_paragraph"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"GenericMixtapeParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"mixtapeMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"href"}},{kind:"Field",name:{kind:"Name",value:"thumbnailImageId"}}]}},{kind:"Field",name:{kind:"Name",value:"markups"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"start"}},{kind:"Field",name:{kind:"Name",value:"end"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"href"}}]}}]}}]))},l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CatalogMixtapeParagraphQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogById"},arguments:[{kind:"Argument",name:{kind:"Name",value:"catalogId"},value:{kind:"Variable",name:{kind:"Name",value:"catalogId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogMixtapeParagraph_catalog"}}]}}]}}]}}].concat(a()(o.definitions))}},37269:(e,t,n)=>{"use strict";n.d(t,{Pq:()=>ge,Do:()=>ve,zZ:()=>me});var r=n(63038),a=n.n(r),i=n(59854),o=n.n(i),c=n(67294),l=n(46484),u=n(10374),s=n(38381),d=n(59713),p=n.n(d),f=function e(t){return"string"==typeof t?t.length:t.children.reduce((function(t,n){return t+e(n)}),0)};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,v=function e(t,n,r){var a=[],i=n;return t.forEach((function(t){var n=f(t),o=function(e){if("string"!=typeof e)return{type:"HLJS_MARKUP",start:0,end:f(e),className:e.scope,priority:1}}(t);if(o){var c=function(e,t){return h(h({},e),{},{priority:t})}(function(e,t){return h(h({},e),{},{start:t,end:t+(e.end-e.start)})}(o,i),r);a.push(c)}"string"!=typeof t&&(a=a.concat(e(t.children,i,r+1))),i+=n})),a},y=n(44651),E=n(319),b=n.n(E),S=n(14199),O=n(14646),x={xs:"S",sm:"S",md:"M",lg:"M",xl:"M"},I=function(e){return{color:e.baseColor.text.normal}},P=c.forwardRef((function(e,t){var n=e.children,r=e.paragraphName,a=e.rules,i=e.richTextStyle,o=(0,O.I)(),u=c.useContext(l.M),s="FULL_PAGE"===i||"CARD"===i||"SHORTFORM_CARD"===i||"INLINE"===i?x:"S",d=(0,S.n)({name:"body",scale:s}),p=o([a,{wordBreak:"break-word"}].concat(b()(u?[I]:[d])));return c.createElement("p",{id:r,className:p,ref:t},n)})),w=n(97217),N={card:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"},fullPage:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},streamLike:"M"},T={card:{xs:"XS",sm:"XS",md:"S",lg:"S",xl:"S"},fullPage:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"},streamLike:"S"},k=c.forwardRef((function(e,t){var n=e.children,r=e.paragraphName,a=e.richTextStyle,i=e.rules,o=e.paragraphType,l=(0,O.I)(),u="CARD"===a||"SHORTFORM_CARD"===a,s="INLINE"===a,d="STREAM"===a||u||s,p=o===w.NJ.H4?"h2":"h1",f="h1"===p?N:T,g=u||s?f.card:d?f.streamLike:f.fullPage,h=l([i,(0,S.n)({name:"heading",scale:g,fontWeight:s?"INLINE":"NORMAL"})]);return c.createElement(p,{id:r,className:h,ref:t},n)})),R=c.forwardRef((function(e,t){var n=e.children,r=e.paragraphName,a=e.rules,i=(0,O.I)()([a,(0,S.n)({name:"overline",scale:"M",color:"LIGHTER"})]);return c.createElement("h2",{id:r,className:i,ref:t,"aria-label":"kicker paragraph"},n)})),M={xs:"S",sm:"S",md:"M",lg:"M",xl:"M"},C=function(e){return{color:e.baseColor.text.normal}},_=c.forwardRef((function(e,t){var n=e.children,r=e.paragraphName,a=e.rules,i=e.richTextStyle,o=(0,O.I)(),u=c.useContext(l.M),s="FULL_PAGE"===i?M:"S",d=(0,S.n)({name:"body",scale:s}),p=o([a,{listStyleType:"decimal",marginLeft:"30px",paddingLeft:"0px"}].concat(b()(u?[C]:[d])));return c.createElement("li",{id:r,className:p,ref:t},n)})),D={xs:"S",sm:"S",md:"SM",lg:"SM",xl:"SM"},H=function(e){return{color:e.baseColor.text.normal}},L=c.forwardRef((function(e,t){var n=e.children,r=e.hasDropCap,a=e.paragraphName,i=e.rules,o=(0,O.I)(),u=c.useContext(l.M),s=(0,S.n)({name:"body",scale:D}),d=o([i,{wordBreak:"break-word"}].concat(b()(u?[H]:[s]),b()(r?[{clear:"left"}]:[])));return c.createElement("p",{id:a,className:"pw-post-body-paragraph ".concat(d),ref:t},n)})),j=c.forwardRef((function(e,t){var n=e.children,r=e.paragraphName,a=e.richTextStyle,i=e.rules,o=(0,O.I)()([i,(0,S.n)({name:"pullQuote",scale:"CARD"===a||"SHORTFORM_CARD"===a?{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}:"L"})]);return c.createElement("p",{id:r,className:o,ref:t},n)})),A=c.forwardRef((function(e,t){var n=e.children,r=e.paragraphName,a=e.rules,i=e.whiteSpace,o=(0,O.I)()([a,{display:"block",whiteSpace:i||"pre-wrap",minWidth:"fit-content"}]);return c.createElement("span",{id:r,className:o,ref:t},n)})),F=c.forwardRef((function(e,t){var n=e.paragraphName,r=e.rules,a=e.children;return c.createElement(A,{paragraphName:n,ref:t,rules:r,whiteSpace:"pre"},a)})),q=function(e){var t=e.children,n=e.paragraphName,r=e.rules,a=e.paragraphRef,i=e.paragraph,o=i.text,l=i.codeBlockMetadata,u=null==l?void 0:l.mode,s=null==l?void 0:l.lang;return u&&u!==w.r5.DISABLED?c.createElement(F,{lang:s,paragraphName:n,ref:a,rules:r,text:o},t):c.createElement(A,{paragraphName:n,ref:a,rules:r},t)},W=n(67154),U=n.n(W),Q={xs:"L",sm:"L",md:"L",lg:"L",xl:"L"},B={xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},G=function(e){var t=e.children,n=e.paragraphName,r=e.richTextStyle,a=e.rules,i=e.forwardedRef,o="FULL_PAGE"===r,l="CARD"===r||"SHORTFORM_CARD"===r,u="INLINE"===r,s=(0,O.I)()([a,(0,S.n)({name:"subtitle",scale:u?Q:o||l?B:"L",color:"LIGHTER",richTextStyle:r})]);return c.createElement("h2",{id:n,className:"pw-subtitle-paragraph ".concat(s),ref:i},t)},z=c.forwardRef((function(e,t){return c.createElement(G,U()({},e,{forwardedRef:t}))})),V={xs:"M",sm:"M",md:"XL",lg:"XL",xl:"XL"},$={xs:"M",sm:"M",md:"M",lg:"M",xl:"M"},X={xs:"S",sm:"S",md:"L",lg:"L",xl:"L"},Y=function(e){var t=e.children,n=e.richTextStyle,r=e.paragraphName,a=e.rules,i=e.forwardedRef,o="CARD"===n||"SHORTFORM_CARD"===n,l="FULL_PAGE"===n,u="INLINE"===n,s=(0,O.I)()([a,[(0,S.n)({name:"title",scale:u?$:l?V:o?X:"M",richTextStyle:n,color:"NORMAL"})]]);return c.createElement("h1",{id:r,className:"pw-post-title ".concat(s),ref:i},t)},J=c.forwardRef((function(e,t){return c.createElement(Y,U()({},e,{forwardedRef:t}))})),K={xs:"S",sm:"S",md:"M",lg:"M",xl:"M"},Z=function(e){return{color:e.baseColor.text.normal}},ee=c.forwardRef((function(e,t){var n=e.children,r=e.paragraphName,a=e.rules,i=e.richTextStyle,o=(0,O.I)(),u=c.useContext(l.M),s="FULL_PAGE"===i?K:"S",d=(0,S.n)({name:"body",scale:s}),p=o([a,{listStyleType:"disc",marginLeft:"30px",paddingLeft:"0px"}].concat(b()(u?[Z]:[d])));return c.createElement("li",{id:r,className:p,ref:t},n)})),te=n(66216),ne=n(18155),re=n(31889),ae=n(75221),ie=n(21638),oe=n(51463),ce=n.n(oe),le={bash:ce()((function(){return n.e(1878).then(n.bind(n,51878))})),c:ce()((function(){return n.e(3371).then(n.bind(n,43371))})),cpp:ce()((function(){return n.e(1730).then(n.bind(n,61730))})),csharp:ce()((function(){return n.e(6917).then(n.bind(n,6917))})),css:ce()((function(){return n.e(5631).then(n.bind(n,43809))})),diff:ce()((function(){return n.e(3952).then(n.bind(n,53952))})),go:ce()((function(){return n.e(9012).then(n.bind(n,99012))})),graphql:ce()((function(){return n.e(6159).then(n.bind(n,96159))})),ini:ce()((function(){return n.e(466).then(n.bind(n,20466))})),java:ce()((function(){return n.e(8501).then(n.bind(n,78501))})),javascript:ce()((function(){return n.e(9410).then(n.bind(n,29410))})),json:ce()((function(){return n.e(4447).then(n.bind(n,44447))})),kotlin:ce()((function(){return n.e(7413).then(n.bind(n,47413))})),less:ce()((function(){return n.e(5384).then(n.bind(n,35384))})),lua:ce()((function(){return n.e(9505).then(n.bind(n,79505))})),makefile:ce()((function(){return n.e(5181).then(n.bind(n,45181))})),markdown:ce()((function(){return n.e(7288).then(n.bind(n,17288))})),objectivec:ce()((function(){return n.e(4332).then(n.bind(n,64332))})),perl:ce()((function(){return n.e(803).then(n.bind(n,803))})),"php-template":ce()((function(){return n.e(455).then(n.bind(n,30455))})),php:ce()((function(){return n.e(7170).then(n.bind(n,11689))})),plaintext:ce()((function(){return n.e(2851).then(n.bind(n,82851))})),"python-repl":ce()((function(){return n.e(8447).then(n.bind(n,68447))})),python:ce()((function(){return n.e(7906).then(n.bind(n,37906))})),r:ce()((function(){return n.e(4042).then(n.bind(n,94042))})),ruby:ce()((function(){return n.e(8239).then(n.bind(n,28239))})),rust:ce()((function(){return n.e(8069).then(n.bind(n,78069))})),scss:ce()((function(){return n.e(7360).then(n.bind(n,7360))})),shell:ce()((function(){return n.e(9583).then(n.bind(n,9583))})),swift:ce()((function(){return n.e(7915).then(n.bind(n,47915))})),sql:ce()((function(){return n.e(8097).then(n.bind(n,38097))})),typescript:ce()((function(){return n.e(7749).then(n.bind(n,37749))})),vbnet:ce()((function(){return n.e(209).then(n.bind(n,70209))})),xml:ce()((function(){return n.e(7136).then(n.bind(n,47136))})),x86asm:ce()((function(){return n.e(1488).then(n.bind(n,61488))})),yaml:ce()((function(){return n.e(5249).then(n.bind(n,85249))}))},ue=ce()((function(){return n.e(2230).then(n.bind(n,22230)).then((function(e){return m=e.default}))})),se=n(32342),de=n(39202),pe=function(e,t){var n=null==t?void 0:t.mode,r=null==t?void 0:t.lang,i=function(e){var t,n,r,i,o,l=void 0!==(t=e)&&Object.keys(le).includes(t),u=(n=(0,c.useState)(m),r=a()(n,2),i=r[0],o=r[1],(0,c.useEffect)((function(){i||ue().then((function(e){o(e)}))}),[]),i),s=(0,c.useState)(e&&null!=u&&u.getLanguage(e)?u:void 0),d=a()(s,2),p=d[0],f=d[1];return(0,c.useEffect)((function(){l&&u&&!p&&le[e]().then((function(t){null==u||u.registerLanguage(e,t.default),f(u)}))}),[e,u,p]),p}(r||void 0);return c.useMemo((function(){if(n&&r&&n!==ae.r5.DISABLED){var t=null==i?void 0:i.highlight(e||"",{language:r});return t?(a=t._emitter.rootNode,v(a.children,0,1)):void 0}var a}),[i])},fe={xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},ge={marginTop:{xs:"8px",sm:"12px",md:"12px",lg:"18px",xl:"20px"}},he=function(e,t,n,r,i){return{marginTop:i?"".concat(i,"px"):(0,ne.mu)((function(e){var n=a()(e,2),i=n[0],c=n[1];return"".concat(o()(i/c-(r.xHeight+(t-1)/2),2),"em")}),e,n),marginBottom:"".concat(o()(-1*(r.baseline+(t-1)/2),2),"em")}},me=function(e){var t=e.children,n=e.hasDropCap,r=e.marginTopOverride,i=e.name,o=e.paragraphRef,u=e.paragraphStyle,s=e.richTextStyle,d=e.spaceTop,p=e.paragraph,f=(0,re.F)(),g=function(e){var t=e.isEmbedded,n=e.marginTopOverride,r=e.paragraphStyle,i=e.richTextStyle,o=e.spaceTop,c=e.theme,l=e.isPreV2,u=function(e,t,n,r){var i="FULL_PAGE"===t,o="CARD"===t||"SHORTFORM_CARD"===t,c="INLINE"===t,l="STREAM"===t||o||c;switch(e){case se.qq.Title:var u=n.newFonts.title.fontSize,s=u&&(0,ne.mu)((function(e){var t=a()(e,1)[0];return u[t]}),V);return i||o||c?{fontRule:ie.Wd,multipliers:ie.jo,fontSize:s,lineHeight:1.23,letterSpacing:"0"}:{fontRule:ie.Yu,multipliers:ie.Yq,fontSize:l?34:30,lineHeight:1.12,letterSpacing:"-0.022em"};case se.qq.Subtitle:var d=n.newFonts.subtitle.fontSize,p=d&&(0,ne.mu)((function(e){var t=a()(e,1)[0];return d[t]}),fe);return{fontRule:ie.Wt,multipliers:ie.Yq,fontSize:l?24:p,lineHeight:1.394,letterSpacing:"0"};case se.qq.Kicker:var f=n.newFonts.overline.fontSize,g=f&&f.M;return{fontRule:ie.Wt,multipliers:ie.Yq,fontSize:g||22,lineHeight:1.18,letterSpacing:"-0.022em"};case se.qq.P:case se.qq.BQ:return{fontRule:ie.rJ,multipliers:ie.Ol,fontSize:{xs:18,sm:18,md:i||o||c?21:18,lg:i||o||c?21:18,xl:i||o||c?21:18},lineHeight:1.58,letterSpacing:"-0.004em"};case se.qq.ULI:case se.qq.OLI:return{fontRule:ie.rJ,multipliers:ie.Ol,fontSize:{xs:18,sm:18,md:i?21:c?20:18,lg:i?21:c?20:18,xl:i?21:c?20:18},lineHeight:1.58,letterSpacing:"-0.004em"};case se.qq.H1:case se.qq.H2:case se.qq.H3:return{fontRule:ie.Yu,multipliers:ie.Yq,fontSize:o||c?{xs:n.newFonts.heading.fontSize.S,sm:n.newFonts.heading.fontSize.S,md:n.newFonts.heading.fontSize.M,lg:n.newFonts.heading.fontSize.M,xl:n.newFonts.heading.fontSize.M}:l?26:{xs:30,sm:30,md:34,lg:34,xl:34},lineHeight:o||c?1.31:1.12,letterSpacing:"-0.022em"};case se.qq.H4:return{fontRule:ie.Yu,multipliers:ie.Yq,fontSize:o||c?{xs:n.newFonts.heading.fontSize.XS,sm:n.newFonts.heading.fontSize.XS,md:n.newFonts.heading.fontSize.S,lg:n.newFonts.heading.fontSize.S,xl:n.newFonts.heading.fontSize.S}:l?22:{xs:24,sm:24,md:26,lg:26,xl:26},lineHeight:o?1.22:1.18,letterSpacing:"-0.022em"};case se.qq.PRE:return{fontRule:ie.XK,multipliers:ie.G4,fontSize:r?14:16,lineHeight:r?1.4:1.18,letterSpacing:"-0.022em"};case se.qq.PQ:return{fontRule:ie.Wd,multipliers:ie.z1,fontSize:24,lineHeight:1.48,letterSpacing:"-0.014em"};default:return null}}(r,i,c,void 0!==l&&l);if(null==u)return[];t&&(u=function(e,t){switch(e){case se.qq.P:case se.qq.BQ:t.fontSize={xs:18,sm:18,md:18,lg:18,xl:18},t.lineHeight=1.34,t.fontRule=ie.Wt;break;case se.qq.ULI:t.fontSize={xs:18,sm:18,md:18,lg:18,xl:18},t.lineHeight=1.48,t.fontRule=ie.Wt}return t}(r,u));var s,d=u,p=d.fontRule,f=d.multipliers,g=d.fontSize,h=d.lineHeight,m=d.letterSpacing,v="number"==typeof g?g*h:Object.entries(g).reduce((function(e,t){var n=a()(t,2),r=n[0],i=n[1];return e[r]=i*h,e}),{}),y="SHORTFORM_CARD"===i&&r===se.qq.Subtitle&&h?(0,te.V)({clamp:1,lineHeight:v}):{};return[{lineHeight:h,letterSpacing:m,fontStyle:(0,se.S$)(r)},p({fontSize:g}),t?(s=r,s!==se.qq.P?{}:ge):he(o,h,g,f,n),y]}({isEmbedded:c.useContext(l.M),marginTopOverride:r,richTextStyle:s,paragraphStyle:u,spaceTop:d,theme:f,isPreV2:!(null==p||!p.codeBlockMetadata)});switch(u){case se.qq.Title:return c.createElement(J,{paragraphName:i,richTextStyle:s,ref:o,rules:g},t);case se.qq.Subtitle:return c.createElement(z,{paragraphName:i,richTextStyle:s,ref:o,rules:g},t);case se.qq.PQ:return c.createElement(j,{paragraphName:i,richTextStyle:s,ref:o,rules:g},t);case se.qq.Kicker:return c.createElement(R,{paragraphName:i,ref:o,rules:g},t);case se.qq.P:return c.createElement(L,{hasDropCap:n,paragraphName:i,ref:o,rules:g},t);case se.qq.BQ:return c.createElement(P,{paragraphName:i,richTextStyle:s,ref:o,rules:g},t);case se.qq.ULI:return c.createElement(ee,{paragraphName:i,richTextStyle:s,ref:o,rules:g},t);case se.qq.OLI:return c.createElement(_,{paragraphName:i,richTextStyle:s,ref:o,rules:g},t);case se.qq.H1:case se.qq.H2:case se.qq.H3:case se.qq.H4:return c.createElement(k,{paragraphName:i,paragraphType:u,richTextStyle:s,ref:o,rules:g},t);case se.qq.PRE:return c.createElement(q,{paragraphName:i,paragraphRef:o,rules:g,paragraph:p},t);default:return(0,de.v)(u),null}};function ve(e){var t=e.highlights,n=e.marginTopOverride,r=e.paragraph,a=e.paragraphStyle,i=e.privateNotes,o=e.richTextStyle,l=e.spaceTop,d=!!r&&!!r.hasDropCap,p=(0,u.CF)(r,a),f=pe(r.text,r.codeBlockMetadata);return c.createElement(me,{hasDropCap:d,marginTopOverride:n,name:r.name||void 0,paragraphRef:p,paragraphStyle:a,richTextStyle:o,spaceTop:l,paragraph:r},i&&c.createElement(y.A7,{paragraph:r,privateNotes:i}),c.createElement(s.T2,{allowDropCap:!0,highlights:t,paragraph:r,paragraphStyle:a,richTextStyle:o,hljsMarkups:f}))}},35283:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r=n(67294).createContext({inResponseToEntityId:"",isThreadedResponsesVisible:!1,toggleThreadedResponses:function(){},showThreadedResponses:function(){},threadDepthFromRootEntity:0,threadDepthOnPage:0,hideCreateReply:function(){},toggleCreateReply:function(){},loadThreadedResponses:function(){},isThreadedResponsesQueryCalled:!1,isThreadedResponsesQueryLoading:!1,showContinueThisThreadSidebar:function(){}})},12643:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var r=n(67294),a=n(77355),i=r.forwardRef((function(e,t){var n=e.height,i=void 0===n?1:n,o=e.width,c=void 0===o?1:o,l=e.backgroundColor,u=void 0===l?"BASE_NORMAL":l,s=e.children,d=(c=c||1)/(i=i||1);return r.createElement(a.x,{position:"relative",margin:"auto",backgroundColor:u,ref:t,overflow:"hidden"},r.createElement(a.x,{paddingBottom:"".concat(100/d,"%"),height:"0"},s))}))},54188:(e,t,n)=>{"use strict";n.d(t,{G:()=>b});var r=n(319),a=n.n(r),i=n(59713),o=n.n(i),c=n(63038),l=n.n(c),u=n(67294),s=n(5977),d=n(94124),p=n(30555),f=n(92661),g=n(43487),h=n(46696),m=n(12532),v=n(50458);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.alt,n=e.rules,r=e.miroId,i=e.width,o=e.maxWidth,c=e.expectedWidth,y=e.height,b=e.strategy,S=e.freezeGifs,O=e.focusPercentX,x=e.focusPercentY,I=e.loading,P=e.webp,w=void 0!==P&&P,N=(0,p.BO)(),T=(0,g.v9)((function(e){return e.config.miroV2Ramp})),k=(0,s.TH)(),R=(0,f.$B)(k.pathname),M=(0,u.useState)(!1),C=l()(M,2),_=C[0],D=C[1],H=(0,u.useMemo)((function(){var e=R?(0,v.mrd)(R):"";return T.some((function(t){return t&&(null==e?void 0:e.endsWith(t))}))}),[R,v.mrd,T]),L=w&&!_,j=H&&!_,A={miroId:r,width:i,height:y,strategy:b,freezeGifs:S,focusPercentX:O,focusPercentY:x},F=(0,h.W6)(A),q=c===m.Hj||N?"100vw":"".concat(c,"px"),W=(0,u.useMemo)((function(){var e=[320,360,375,393,414,550];c&&e.push(c),N&&e.push(m.Hj);var t=e.map((function(e){var t=2*e,n=(0,h.W6)(E(E({},A),{},{width:t,ignorePixelRatio:!0,useMiroV2:j}));return"".concat(n," ").concat(t,"w")})),n=e.map((function(e){var t=2*e,n=(0,h.W6)(E(E({},A),{},{ignorePixelRatio:!0,width:t,webp:L,useMiroV2:j}));return"".concat(n," ").concat(t,"w")})),r=a()(t).join(", "),i=a()(n).join(", ");return{sizes:"(min-resolution: 4dppx) and (max-width: ".concat(m.aM,"px) 50vw,\n                   (-webkit-min-device-pixel-ratio: 4) and (max-width: ").concat(m.aM,"px) 50vw, \n                   (min-resolution: 3dppx) and (max-width: ").concat(m.aM,"px) 67vw,\n                   (-webkit-min-device-pixel-ratio: 3) and (max-width: ").concat(m.aM,"px) 65vw, \n                   (min-resolution: 2.5dppx) and (max-width: ").concat(m.aM,"px) 80vw,\n                   (-webkit-min-device-pixel-ratio: 2.5) and (max-width: ").concat(m.aM,"px) 80vw,\n                   (min-resolution: 2dppx) and (max-width: ").concat(m.aM,"px) 100vw,\n                   (-webkit-min-device-pixel-ratio: 2) and (max-width: ").concat(m.aM,"px) 100vw,\n                   ").concat(q).replace(/\s+/g," "),srcSet:r,transcodedSrcSet:i}}),[N,c,m.aM,A,2]),U=W.sizes,Q=W.srcSet,B=W.transcodedSrcSet,G=[],z={};return o&&(z.maxWidth=o,G=G.concat([z])),n&&(G=G.concat(n).concat((function(e){return{backgroundColor:e.backgroundColor}}))),u.createElement("picture",null,L&&u.createElement("source",{srcSet:B,sizes:U,type:"image/webp"}),u.createElement("source",{"data-testid":"og",srcSet:Q,sizes:U}),u.createElement(d.E,{imgRef:function(e){return function(t){t&&!t.src&&(t.src=e)}}(F),alt:t,rules:G,width:c,height:y,loading:I,handleError:function(){return D(!0)}}))}},30555:(e,t,n)=>{"use strict";n.d(t,{BO:()=>v,X1:()=>y});var r=n(63038),a=n.n(r),i=n(59713),o=n.n(i),c=n(67294),l=n(91583),u=n(18627),s=n(14646),d=n(34135),p=n(37734),f=n(77241),g=n(21021),h=function(e,t,n,r,a,i,c){var l;if(!(a&&c&&i&&e))return{};var u=Math.min(Math.min(t,r||1/0)/c,Math.min(e,n||1/0)/i),s=c*u,d=i*u,g=(e-d)/2,h=((t-s)/2-(a.left+(c-s)/2))/u,m=(g-(a.top+(i-d)/2))/u;return l={},o()(l,(0,p.nk)("no-preference"),{transition:"transform 300ms cubic-bezier(0.2, 0, 0.2, 1)"}),o()(l,"zIndex",f.ZP.floating),o()(l,"transform","scale(".concat(u,") translate(").concat(h,"px, ").concat(m,"px)")),o()(l,"position","absolute"),o()(l,"height","".concat(i,"px")),o()(l,"width","".concat(c,"px")),o()(l,"cursor","zoom-out"),l},m=c.createContext(!1),v=function(){return c.useContext(m)},y=function(e){var t=e.children,n=e.height,r=e.width,a=e.originalHeight,i=e.originalWidth,o=e.paragraphRef;return e.isLinked||!a||!i||!n||n===a&&r===i?t:c.createElement(E,{originalHeight:a,originalWidth:i,height:n,width:r,paragraphRef:o},t)},E=function(e){var t=e.children,n=e.originalHeight,r=e.originalWidth,i=e.height,v=e.width,y=e.paragraphRef,E=c.useState(null),b=a()(E,2),S=b[0],O=b[1],x=c.useState(0),I=a()(x,2),P=I[0],w=I[1],N=c.useState(0),T=a()(N,2),k=T[0],R=T[1],M=c.useState(0),C=a()(M,2),_=C[0],D=C[1],H=(0,s.I)(),L=(0,u.Av)(),j=y&&y.current&&y.current.getBoundingClientRect(),A=c.useRef(null),F=c.useCallback((function(){L.event("client.action",{action:"zoom",eventType:"click"})}),[]),q=c.useCallback((function(){A.current&&A.current.focus(),O(!1)}),[null==A?void 0:A.current,O]),W=c.useCallback((function(){S&&Math.abs(_-window.scrollY)>40&&q()}),[S,_,q]),U=c.useCallback((function(){w(window.innerHeight),R(window.innerWidth)}),[w,R]);c.useEffect((function(){return w(window.innerHeight),R(window.innerWidth),D(window.scrollY),d.V6.on("scroll",W),d.V6.on("resize",U),function(){d.V6.off("scroll",W),d.V6.off("resize",U)}}),[w,R,D,W,U]);var Q,B,G=(0,g.r)((function(){S?q():(F(),O(!0))}),[F,O,S,q]);return c.createElement(c.Fragment,null,c.createElement(m.Provider,{value:S},c.createElement("div",{onClick:G,onKeyDown:G,role:"button",tabIndex:0,ref:A,className:H(S?h(P,k,n,r,j,i,v):(Q=S,B={},o()(B,(0,p.nk)("no-preference"),{transition:"transform 300ms cubic-bezier(0.2, 0, 0.2, 1)"}),o()(B,"cursor","zoom-in"),o()(B,"position","relative"),o()(B,"zIndex",null===Q?"auto":f.ZP.floating),o()(B,"width","100%"),o()(B,":focus",{transform:"scale(1.01)"}),B)),onTransitionEnd:function(){S||O(null)}},t),c.createElement(l.V,{shouldTrapFocus:!1,padding:0,withPageScroll:!0,isVisible:!!S,hide:q,withCloseButton:!1},c.createElement(c.Fragment,null))))}},52499:(e,t,n)=>{"use strict";n.d(t,{HM:()=>s,QS:()=>d,nO:()=>p,yH:()=>f,GE:()=>g,Zf:()=>h,m1:()=>m,lA:()=>v,Mk:()=>y,OG:()=>E,Bu:()=>b,NY:()=>S,S1:()=>O,h_:()=>x,zg:()=>I,qB:()=>P});var r=n(63038),a=n.n(r),i=n(59713),o=n.n(i),c=n(18155);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=0,d=10,p={xs:24,sm:24,md:32,lg:32,xl:32},f=36,g={xs:32,sm:32,md:40,lg:40,xl:40},h={xs:40,sm:40,md:56,lg:56,xl:56},m={xs:48,sm:48,md:66,lg:66,xl:66},v={xs:48,sm:48,md:80,lg:80,xl:80},y=36,E=24,b=24,S=16,O=32,x=40,I=u(u({},h),{},{lg:0,xl:0}),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return{marginTop:(0,c.mu)((function(e){var t=a()(e,1)[0];return"".concat(t,"px")}),e)}}}},21021:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var r=n(67294),a=function(e,t){return r.useCallback((function(t){"key"in t&&"Enter"!==t.key&&" "!==t.key||("key"in t&&" "===t.key&&t.preventDefault(),e(t))}),t)}},12532:(e,t,n)=>{"use strict";n.d(t,{Hj:()=>a,aM:()=>o,jg:()=>c});var r=n(46696),a=2400,i=1e3,o=700,c=function(e){var t=e.layout,n=e.originalWidth,c=e.originalHeight,l=e.sequenceAspectRatio,u=e.richTextStyle,s=r._S.Resample,d=c&&n?c/n:null,p=n;switch(t){case"CROPPED_HEIGHT_PREVIEW":p=o,d=.3,s=r._S.Crop;break;case"CONSTRAINED_HEIGHT_PREVIEW":p=o,d&&240/d<p&&(p=240/d);break;case"INSET_LEFT":case"INSET_CENTER_SMALL":case"INSET_RIGHT":p=350;break;case"OUTSET_LEFT":p="CARD"===u||"SHORTFORM_CARD"===u?i:500;break;case"OUTSET_ROW":case"OUTSET_ROW_CONTINUE":p=i,l&&d&&(p*=1/d/l);break;case"OUTSET_CENTER":p=i;break;case"FULL_WIDTH":case"FULL_WIDTH_CROPPED_COVER":p=a;break;default:p=o}return n&&(p=Math.min(p,n)),{width:p=Math.ceil(p),height:d?Math.ceil(d*p):void 0,strategy:s}}},53546:(e,t,n)=>{"use strict";n.d(t,{eu:()=>E,Gj:()=>y,Sz:()=>b,x$:()=>v});var r,a=n(28655),i=n.n(a),o=n(59713),c=n.n(o),l=n(50361),u=n.n(l),s=n(92471);!function(e){e[e.HIGHLIGHT=0]="HIGHLIGHT",e[e.RESPONSE=1]="RESPONSE"}(r||(r={}));var d,p=n(97217);function f(){var e=i()(["\n  fragment buildQuotePreviewParagraph_quote on Quote {\n    paragraphs {\n      id\n      text\n      type\n      markups {\n        end\n        start\n        type\n      }\n    }\n    startOffset\n    endOffset\n  }\n"]);return f=function(){return e},e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=(d={},c()(d,p.a6.HIGHLIGHT,r.HIGHLIGHT),c()(d,p.a6.RESPONSE,r.RESPONSE),d),y=function(e){var t=100;if(1!==e.paragraphs.length)return null;var n=u()(e.paragraphs[0]),r=n.text||"",a=0,i=e.startOffset||0,o=e.endOffset||r.length;if(r.length-o>t&&(r=r.substring(0,o+t)+"…"),i>t){var c=i-t;r="…"+r.substring(c),a=c-1}n.text=r,n.type=p.NJ.P,n.markups.unshift({end:o,start:i,type:p.FT.HIGHLIGHT});var l,s=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(n.markups);try{for(s.s();!(l=s.n()).done;){var d=l.value;d.start-=a,d.end-=a}}catch(e){s.e(e)}finally{s.f()}return n},E=function(e){if(1!==e.paragraphs.length)return null;var t=e.paragraphs[0].text||"",n=e.startOffset||0,r=e.endOffset||t.length,a=t.slice(n,r);return a.length>=185&&(a=a.substring(0,185)+"..."),h(h({},e.paragraphs[0]),{},{text:a,type:p.NJ.P,markups:[{end:a.length,start:0,type:p.FT.HIGHLIGHT,anchorType:null,href:null,linkMetadata:null,userId:null}],hasDropCap:null,dropCapImage:null,codeBlockMetadata:null})},b=(0,s.Ps)(f())},32342:(e,t,n)=>{"use strict";n.d(t,{qq:()=>C,S$:()=>U,fj:()=>V,jH:()=>$,gd:()=>X,Cn:()=>Y,EH:()=>J});var r=n(319),a=n.n(r),i=n(59713),o=n.n(i),c=n(28655),l=n.n(c),u=n(92471),s=n(97217),d=n(52499),p=n(68216);function f(){var e=l()(["\n  fragment normalizedBodyModel_privateNote on Note {\n    ...getParagraphPrivateNotes_privateNote\n  }\n  ","\n"]);return f=function(){return e},e}function g(){var e=l()(["\n  fragment normalizedBodyModel_highlight on Quote {\n    ...getParagraphHighlights_highlight\n  }\n  ","\n"]);return g=function(){return e},e}function h(){var e=l()(["\n  fragment normalizedBodyModel_richText on RichText {\n    paragraphs {\n      markups {\n        type\n      }\n      codeBlockMetadata {\n        lang\n        mode\n      }\n      ...getParagraphHighlights_paragraph\n      ...getParagraphPrivateNotes_paragraph\n    }\n    sections {\n      startIndex\n      ...getSectionEndIndex_section\n    }\n    ...getParagraphStyles_richText\n    ...getParagraphSpaces_richText\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=l()(["\n  fragment getParagraphPrivateNotes_privateNote on Note {\n    id\n    anchor\n    author {\n      id\n      name\n      username\n      imageId\n      mediumMemberAt\n      ...userUrl_user\n    }\n    content\n    createdAt\n    postId\n    post {\n      id\n      creator {\n        id\n      }\n      collection {\n        id\n      }\n    }\n    replies {\n      id\n      author {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        ...userUrl_user\n      }\n      content\n      createdAt\n      noteId\n      postId\n    }\n    selectionStartOffset\n    selectionEndOffset\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=l()(["\n  fragment getParagraphPrivateNotes_paragraph on Paragraph {\n    name\n  }\n"]);return v=function(){return e},e}function y(){var e=l()(["\n  fragment getParagraphHighlights_highlight on Quote {\n    id\n    paragraphs {\n      name\n    }\n    startOffset\n    endOffset\n    userId\n  }\n"]);return y=function(){return e},e}function E(){var e=l()(["\n  fragment getParagraphHighlights_paragraph on Paragraph {\n    name\n  }\n"]);return E=function(){return e},e}function b(){var e=l()(["\n  fragment getParagraphSpaces_richText on RichText {\n    paragraphs {\n      layout\n      metadata {\n        originalHeight\n        originalWidth\n        id\n      }\n      type\n      ...paragraphExtendsImageGrid_paragraph\n    }\n    ...getSeriesParagraphTopSpacings_richText\n    ...getPostParagraphTopSpacings_richText\n  }\n  ","\n  ","\n  ","\n"]);return b=function(){return e},e}function S(){var e=l()(["\n  fragment paragraphExtendsImageGrid_paragraph on Paragraph {\n    layout\n    type\n  }\n"]);return S=function(){return e},e}function O(){var e=l()(["\n  fragment getSeriesParagraphTopSpacings_richText on RichText {\n    paragraphs {\n      id\n    }\n    sections {\n      startIndex\n    }\n  }\n"]);return O=function(){return e},e}function x(){var e=l()(["\n  fragment getEmbedlyCardUrlParams_paragraph on Paragraph {\n    type\n    iframe {\n      mediaResource {\n        iframeSrc\n      }\n    }\n  }\n"]);return x=function(){return e},e}function I(){var e=l()(["\n  fragment getPostParagraphTopSpacings_richText on RichText {\n    paragraphs {\n      layout\n      text\n      codeBlockMetadata {\n        lang\n        mode\n      }\n    }\n    sections {\n      startIndex\n    }\n  }\n"]);return I=function(){return e},e}function P(){var e=l()(["\n  fragment getParagraphStyles_richText on RichText {\n    paragraphs {\n      text\n      type\n    }\n    sections {\n      ...getSectionEndIndex_section\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(){var e=l()(["\n  fragment getSectionEndIndex_section on Section {\n    startIndex\n  }\n"]);return T=function(){return e},e}var k,R=function(e,t,n){var r=e[t+1];return r&&null!=r.startIndex?r.startIndex:n},M=(0,u.Ps)(T());!function(e){e.Title="Title",e.Subtitle="Subtitle",e.Kicker="Kicker"}(k||(k={}));var C=N(N({},k),s.NJ),_=(0,u.Ps)(P(),M),D=function(e,t,n){var r=e.paragraphs,a=e.sections,i=$(n),o=i?d.OG:d.nO,c=i?d.Bu:d.yH,l=i?d.S1:d.Zf,u=i?d.h_:d.lA,s=-1;return r.map((function(e,n){var p=t[n],f=t[n-1],g=e.layout,h=r[n-1]&&r[n-1].layout,m=a[s+1];if(m&&m.startIndex===n){if(s++,("IMG"===p||"IFRAME"===p)&&!i){if("OUTSET_LEFT"===g)return d.zg;if("INSET_LEFT"===g)return d.HM;if(0===n)return"FULL_WIDTH"===g?d.HM:d.nO}return l}if("PQ"===f)return p===f?l:i?d.h_:d.m1;switch(p){case"Title":switch(f){case"Kicker":return c;default:return l}case"Subtitle":switch(f){case"Title":return o;default:return l}case"P":switch(f){case"H1":case"H2":case"H3":case"H4":return o;default:return l}case"H1":case"H2":case"H3":return u;case"OLI":switch(f){case"H1":case"H2":case"H3":case"H4":return o;case"OLI":return d.Mk;default:return l}case"ULI":switch(f){case"H1":case"H2":case"H3":case"H4":return o;case"ULI":return d.Mk;default:return l}case"IMG":case"IFRAME":switch(f){case"IMG":case"IFRAME":switch(h){case"OUTSET_LEFT":case"INSET_LEFT":return d.HM;case"OUTSET_CENTER":switch(g){case"OUTSET_CENTER":case"OUTSET_ROW":return d.HM;case"FULL_WIDTH":return u;default:return l}case"OUTSET_ROW_CONTINUE":switch(g){case"OUTSET_CENTER":case"OUTSET_ROW":return d.HM;default:return l}case"INSET_CENTER":switch(g){case"INSET_LEFT":return d.HM;case"OUTSET_LEFT":return d.QS;case"FULL_WIDTH":return u;default:return l}case"FULL_WIDTH":return"FULL_WIDTH"===g?d.HM:u;default:return l}case"Title":return d.GE;default:return l}case"PRE":switch(f){case"PRE":return d.NY;default:return l}case"PQ":switch(f){case"H1":case"H2":case"H3":case"H4":case"P":return l;default:return u}case"MIXTAPE_EMBED":return o}return l}))},H=function(e,t){var n=e.paragraphs;return n.map((function(e,r){var a=t[r],i=t[r-1];if(0===r)return 24;switch(a){case"Title":switch(i){case"Kicker":return 8;case"IMG":return n[r-1].text?48:32;default:return 24}case"Subtitle":switch(i){case"Title":return 18;default:return 24}case"P":switch(i){case"Title":return 30;case"Subtitle":return 23;case"H1":case"H2":return 14;case"H3":return 13;case"H4":return 11;case"P":return 42;case"BQ":return 40;case"PQ":return 35;case"IMG":return 32;case"MIXTAPE_EMBED":return 48;default:return}case"H1":case"H2":case"H3":switch(i){case"P":return 40;default:return}case"H4":switch(i){case"P":return 36;default:return}case"IMG":case"IFRAME":switch(i){case"Subtitle":return 31;default:return}case"BQ":switch(i){case"P":return 24;default:return}case"PQ":switch(i){case"P":return 32;default:return}case"MIXTAPE_EMBED":switch(i){case"P":return 40;default:return}}}))},L=(0,u.Ps)(I()),j=((0,u.Ps)(x()),function(e,t){var n=e.paragraphs,r=e.sections,a=d.nO,i=d.Zf,o=d.lA,c=-1;return n.map((function(e,n){var l=r[c+1];if(l&&l.startIndex===n)return c++,d.HM;var u=t[n],s=t[n-1];switch(s){case"PQ":if("PQ"!==u)return o}switch(u){case"BQ":switch(s){case"BQ":return a;default:return i}case"OLI":switch(s){case"OLI":return a;default:return i}case"ULI":switch(s){case"ULI":return a;default:return i}case"PQ":switch(s){case"PQ":return i;default:return o}}return i}))}),A=(0,u.Ps)(O()),F=function(e){return e&&"OUTSET_ROW_CONTINUE"===e.layout&&"IMG"===e.type},q=(0,u.Ps)(S()),W=(0,u.Ps)(b(),q,A,L),U=function(e){switch(e){case"BQ":return"italic";default:return"normal"}},Q=(0,u.Ps)(E()),B=(0,u.Ps)(y()),G=(0,u.Ps)(v()),z=(0,u.Ps)(m(),p.$m),V=function(e,t){var n=t.bylineParagraphName,r=t.highlights,i=t.isAuroraPostPageEnabled,o=void 0!==i&&i,c=t.isPostPage,l=void 0!==c&&c,u=t.privateNotes,p=t.richTextStyle,f=t.shouldAddHrs,g=void 0===f||f;if(!e)return[];var h=e.paragraphs,m=e.sections,v=function(e){var t=e.paragraphs,n=e.sections;if(!n[0])return[];for(var r=R(n,0,t.length),a=t.map((function(e){return e.type||s.NJ.P})),i=!1,o=-1,c=0;c<r;c++){var l=t[c];if(i){"H4"===l.type&&(a[c]=C.Subtitle);break}if("H3"===l.type||"H2"===l.type)a[c]=C.Title,i=!0;else{if(-1!==o)break;if("H4"!==l.type){if("IMG"===l.type||"IFRAME"===l.type||"P"===l.type&&/^\s*$/.test(l.text||""))continue;break}o=c}}return i&&-1!==o&&(a[o]=C.Kicker),a}(e),y=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.paragraphs,i="SERIES"===n?j(e,t):D(e,t,n),o=H(e,t),c=[],l=0;l<a.length;l++)if(a[l]){var u=a[l].layout,s=a[l].type;if("OUTSET_ROW"===u&&"IMG"===s){var p=a[l].metadata;if(!p||!p.originalHeight||!p.originalWidth)continue;for(var f=p.originalWidth/p.originalHeight,g=l+1;F(a[g]);){var h=a[g].metadata;if(!h||!h.originalHeight||!h.originalWidth)break;f+=h.originalWidth/h.originalHeight,g++}for(;l<g;)c[l]=f,l++;l=g-1}}return a.map((function(e,l){var u,s=i[l],p=o[l],f={paragraphTopSpacing:s},g=e.codeBlockMetadata,h=null===(u=a[l-1])||void 0===u?void 0:u.codeBlockMetadata,m=t[l],v=t[l-1],y=e.layout,E=a[l-1]?a[l-1].layout:null;switch(m){case"PRE":switch(v){case"PRE":(g||h)&&(f={sequenceTopSpacing:f.paragraphTopSpacing,paragraphTopSpacing:d.HM});break;default:f={sequenceTopSpacing:f.paragraphTopSpacing,paragraphTopSpacing:d.HM}}}switch(y){case"OUTSET_ROW":switch(E){case"OUTSET_ROW_CONTINUE":case"OUTSET_CENTER":f={paragraphTopSpacing:d.HM};break;default:f={paragraphTopSpacing:d.HM,sequenceTopSpacing:f.paragraphTopSpacing}}break;case"OUTSET_ROW_CONTINUE":f={paragraphTopSpacing:"STREAM"===n?d.S1:d.HM}}return c[l]&&(f.sequenceAspectRatio=c[l]),r&&(f.paragraphTopMarginForPostPage=p),f}))}(e,v,p,l),E=function(e,t){if(!t)return[];var n=new Map;return t.forEach((function(e){e.paragraphs.forEach((function(t){var r=n.get(t.name)||[];r.push(e),n.set(t.name,r)}))})),e.map((function(e){return n.get(e.name)||[]}))}(h,r),b=function(e,t){if(!t)return[];var n=new Map;return t.forEach((function(e){var t=e.anchor,r=n.get(t)||[];r.push(e),n.set(t,r)})),e.map((function(e){return n.get(e.name)||[]}))}(h,u),S=h.findIndex((function(e){return e.name===n})),O=0,x=h.map((function(e,t){var n,r=v[t];if(o&&"FULL_PAGE"===p&&"P"===e.type&&"string"==typeof e.text){var i=((null==e?void 0:e.text)||"").split(/\s+/).length;if(O+i<100)O+=i;else if(O<100){var c=100-O;e.markups=[].concat(a()(e.markups),[{type:"ID_WRAPPER",wrapperId:"rmm",start:c,end:c+1,__typename:"Markup"}]),O+=i}}var u,s,d=h[t].layout,f=null===(n=h[t+1])||void 0===n?void 0:n.layout,g="OUTSET_ROW"===d&&"OUTSET_ROW_CONTINUE"===f;if(o&&"FULL_PAGE"===p&&t===S+1)switch(r){case"IMG":g||(u=33);break;case"P":u=24}else!l||g||"CARD"!==p&&"SHORTFORM_CARD"!==p||!y[t].paragraphTopMarginForPostPage||(u=o&&0===t&&"Title"===r?12:y[t].paragraphTopMarginForPostPage,"SHORTFORM_CARD"===p&&(u=0,"Title"===r?s=28:"Subtitle"===r&&(s=0)));return{highlights:E[t],marginTopOverride:u,marginBottomOverride:s,paragraph:e,paragraphStyle:r,privateNotes:b[t],richTextStyle:p,sequenceAspectRatio:y[t].sequenceAspectRatio,sequenceSpaceTop:y[t].sequenceTopSpacing,spaceTop:y[t].paragraphTopSpacing}})),I=[];return m.forEach((function(e,t){var n=R(m,t,h.length);g&&0!==t&&I.push("HR"),I.push({section:e,paragraphViewModels:x.slice(e.startIndex,n)})})),I},$=function(e){return"STREAM"===e||"CARD"===e||"SHORTFORM_CARD"===e},X=(0,u.Ps)(h(),Q,G,M,_,W),Y=(0,u.Ps)(g(),B),J=(0,u.Ps)(f(),z)},61937:(e,t,n)=>{"use strict";n.d(t,{wY:()=>s,Ff:()=>d});var r=n(84564),a=n.n(r),i="[^\\.!*'\\(\\);:@&=+$,/?#\\[\\]\\/]+",o="(?:".concat(i,"@)?"),c="".concat(i,"(?:\\.").concat(i,")+"),l=(new RegExp("^".concat("(?:[A-Za-z][A-Za-z0-9\\.-]*:)?(?:\\/\\/)?").concat(o).concat(c)),["http:","https:"]),u=l.concat(["mailto:"]),s=function(e){var t=a()(e);return!t.protocol||u.includes(t.protocol)},d=function(e){var t=a()(e);return l.includes(null==t?void 0:t.protocol)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3115.88119551.chunk.js.map